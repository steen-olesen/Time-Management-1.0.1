import{r as e,b as t,d as r,R as a}from"./react-vendor-B2nwDuh8.js";import{c as s}from"./supabase-DhdyWrVm.js";import{G as n}from"./icons-Ov1Zs4bf.js";import{f as i,s as l,a as o,b as d,c,e as m,p as x,i as u,d as h,g as p,h as g,j as y}from"./date-DlFWmmnY.js";import{E as b}from"./pdf-Ctz_CC3v.js";import{R as f,B as j,C as k,X as v,Y as N,T as w,L as C,a as _,P as M,b as S}from"./charts-Cx7p-bgM.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var D={exports:{}},F={},T=e,E=Symbol.for("react.element"),B=Symbol.for("react.fragment"),L=Object.prototype.hasOwnProperty,P=T.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,r){var a,s={},n=null,i=null;for(a in void 0!==r&&(n=""+r),void 0!==t.key&&(n=""+t.key),void 0!==t.ref&&(i=t.ref),t)L.call(t,a)&&!$.hasOwnProperty(a)&&(s[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===s[a]&&(s[a]=t[a]);return{$$typeof:E,type:e,key:n,ref:i,props:s,_owner:P.current}}F.Fragment=B,F.jsx=A,F.jsxs=A,D.exports=F;var R,H,W=D.exports,O={},U=t;
/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},q.apply(this,arguments)}O.createRoot=U.createRoot,O.hydrateRoot=U.hydrateRoot,(H=R||(R={})).Pop="POP",H.Push="PUSH",H.Replace="REPLACE";const I="popstate";function z(e){return void 0===e&&(e={}),function(e,t,r,a){void 0===a&&(a={});let{window:s=document.defaultView,v5Compat:n=!1}=a,i=s.history,l=R.Pop,o=null,d=c();null==d&&(d=0,i.replaceState(q({},i.state,{idx:d}),""));function c(){return(i.state||{idx:null}).idx}function m(){l=R.Pop;let e=c(),t=null==e?null:e-d;d=e,o&&o({action:l,location:p.location,delta:t})}function x(e,t){l=R.Push;let r=K(p.location,e,t);d=c()+1;let a=Y(r,d),m=p.createHref(r);try{i.pushState(a,"",m)}catch(x){if(x instanceof DOMException&&"DataCloneError"===x.name)throw x;s.location.assign(m)}n&&o&&o({action:l,location:p.location,delta:1})}function u(e,t){l=R.Replace;let r=K(p.location,e,t);d=c();let a=Y(r,d),s=p.createHref(r);i.replaceState(a,"",s),n&&o&&o({action:l,location:p.location,delta:0})}function h(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,r="string"==typeof e?e:G(e);return r=r.replace(/ $/,"%20"),V(t,"No window.location.(origin|href) available to create URL for href: "+r),new URL(r,t)}let p={get action(){return l},get location(){return e(s,i)},listen(e){if(o)throw new Error("A history only accepts one active listener");return s.addEventListener(I,m),o=e,()=>{s.removeEventListener(I,m),o=null}},createHref:e=>t(s,e),createURL:h,encodeLocation(e){let t=h(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:x,replace:u,go:e=>i.go(e)};return p}(function(e,t){let{pathname:r,search:a,hash:s}=e.location;return K("",{pathname:r,search:a,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:G(t)},0,e)}function V(e,t){if(!1===e||null==e)throw new Error(t)}function J(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(r){}}}function Y(e,t){return{usr:e.state,key:e.key,idx:t}}function K(e,t,r,a){return void 0===r&&(r=null),q({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?X(t):t,{state:r,key:t&&t.key||a||Math.random().toString(36).substr(2,8)})}function G(e){let{pathname:t="/",search:r="",hash:a=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),a&&"#"!==a&&(t+="#"===a.charAt(0)?a:"#"+a),t}function X(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let a=e.indexOf("?");a>=0&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}var Q,Z;function ee(e,t,r){return void 0===r&&(r="/"),function(e,t,r){let a="string"==typeof t?X(t):t,s=he(a.pathname||"/",r);if(null==s)return null;let n=te(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r]);return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(n);let i=null;for(let l=0;null==i&&l<n.length;++l){let e=ue(s);i=me(n[l],e)}return i}(e,t,r)}function te(e,t,r,a){void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===a&&(a="");let s=(e,s,n)=>{let i={relativePath:void 0===n?e.path||"":n,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};i.relativePath.startsWith("/")&&(V(i.relativePath.startsWith(a),'Absolute route path "'+i.relativePath+'" nested under path "'+a+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(a.length));let l=be([a,i.relativePath]),o=r.concat(i);e.children&&e.children.length>0&&(V(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),te(e.children,t,o,l)),(null!=e.path||e.index)&&t.push({path:l,score:ce(l,e.index),routesMeta:o})};return e.forEach((e,t)=>{var r;if(""!==e.path&&null!=(r=e.path)&&r.includes("?"))for(let a of re(e.path))s(e,t,a);else s(e,t)}),t}function re(e){let t=e.split("/");if(0===t.length)return[];let[r,...a]=t,s=r.endsWith("?"),n=r.replace(/\?$/,"");if(0===a.length)return s?[n,""]:[n];let i=re(a.join("/")),l=[];return l.push(...i.map(e=>""===e?n:[n,e].join("/"))),s&&l.push(...i),l.map(t=>e.startsWith("/")&&""===t?"/":t)}(Z=Q||(Q={})).data="data",Z.deferred="deferred",Z.redirect="redirect",Z.error="error";const ae=/^:[\w-]+$/,se=3,ne=2,ie=1,le=10,oe=-2,de=e=>"*"===e;function ce(e,t){let r=e.split("/"),a=r.length;return r.some(de)&&(a+=oe),t&&(a+=ne),r.filter(e=>!de(e)).reduce((e,t)=>e+(ae.test(t)?se:""===t?ie:le),a)}function me(e,t,r){let{routesMeta:a}=e,s={},n="/",i=[];for(let l=0;l<a.length;++l){let e=a[l],r=l===a.length-1,o="/"===n?t:t.slice(n.length)||"/",d=xe({path:e.relativePath,caseSensitive:e.caseSensitive,end:r},o),c=e.route;if(!d)return null;Object.assign(s,d.params),i.push({params:s,pathname:be([n,d.pathname]),pathnameBase:fe(be([n,d.pathnameBase])),route:c}),"/"!==d.pathnameBase&&(n=be([n,d.pathnameBase]))}return i}function xe(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,a]=function(e,t,r){void 0===t&&(t=!1);void 0===r&&(r=!0);J("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let a=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(a.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(a.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let n=new RegExp(s,t?void 0:"i");return[n,a]}(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let n=s[0],i=n.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:a.reduce((e,t,r)=>{let{paramName:a,isOptional:s}=t;if("*"===a){let e=l[r]||"";i=n.slice(0,n.length-e.length).replace(/(.)\/+$/,"$1")}const o=l[r];return e[a]=s&&!o?void 0:(o||"").replace(/%2F/g,"/"),e},{}),pathname:n,pathnameBase:i,pattern:e}}function ue(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return J(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function he(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=e.charAt(r);return a&&"/"!==a?null:e.slice(r)||"/"}function pe(e,t,r,a){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the `to."+r+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function ge(e,t){let r=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t?r.map((e,t)=>t===r.length-1?e.pathname:e.pathnameBase):r.map(e=>e.pathnameBase)}function ye(e,t,r,a){let s;void 0===a&&(a=!1),"string"==typeof e?s=X(e):(s=q({},e),V(!s.pathname||!s.pathname.includes("?"),pe("?","pathname","search",s)),V(!s.pathname||!s.pathname.includes("#"),pe("#","pathname","hash",s)),V(!s.search||!s.search.includes("#"),pe("#","search","hash",s)));let n,i=""===e||""===s.pathname,l=i?"/":s.pathname;if(null==l)n=r;else{let e=t.length-1;if(!a&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}n=e>=0?t[e]:"/"}let o=function(e,t){void 0===t&&(t="/");let{pathname:r,search:a="",hash:s=""}="string"==typeof e?X(e):e,n=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:n,search:je(a),hash:ke(s)}}(s,n),d=l&&"/"!==l&&l.endsWith("/"),c=(i||"."===l)&&r.endsWith("/");return o.pathname.endsWith("/")||!d&&!c||(o.pathname+="/"),o}const be=e=>e.join("/").replace(/\/\/+/g,"/"),fe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),je=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",ke=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";const ve=["post","put","patch","delete"];new Set(ve);const Ne=["get",...ve];
/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},we.apply(this,arguments)}new Set(Ne);const Ce=e.createContext(null),_e=e.createContext(null),Me=e.createContext(null),Se=e.createContext(null),De=e.createContext({outlet:null,matches:[],isDataRoute:!1}),Fe=e.createContext(null);function Te(){return null!=e.useContext(Se)}function Ee(){return Te()||V(!1),e.useContext(Se).location}function Be(t){e.useContext(Me).static||e.useLayoutEffect(t)}function Le(){let{isDataRoute:t}=e.useContext(De);return t?function(){let{router:t}=function(){let t=e.useContext(Ce);return t||V(!1),t}(Ue.UseNavigateStable),r=Ie(qe.UseNavigateStable),a=e.useRef(!1);return Be(()=>{a.current=!0}),e.useCallback(function(e,s){void 0===s&&(s={}),a.current&&("number"==typeof e?t.navigate(e):t.navigate(e,we({fromRouteId:r},s)))},[t,r])}():function(){Te()||V(!1);let t=e.useContext(Ce),{basename:r,future:a,navigator:s}=e.useContext(Me),{matches:n}=e.useContext(De),{pathname:i}=Ee(),l=JSON.stringify(ge(n,a.v7_relativeSplatPath)),o=e.useRef(!1);return Be(()=>{o.current=!0}),e.useCallback(function(e,a){if(void 0===a&&(a={}),!o.current)return;if("number"==typeof e)return void s.go(e);let n=ye(e,JSON.parse(l),i,"path"===a.relative);null==t&&"/"!==r&&(n.pathname="/"===n.pathname?r:be([r,n.pathname])),(a.replace?s.replace:s.push)(n,a.state,a)},[r,s,l,i,t])}()}const Pe=e.createContext(null);function $e(t,r){let{relative:a}=void 0===r?{}:r,{future:s}=e.useContext(Me),{matches:n}=e.useContext(De),{pathname:i}=Ee(),l=JSON.stringify(ge(n,s.v7_relativeSplatPath));return e.useMemo(()=>ye(t,JSON.parse(l),i,"path"===a),[t,l,i,a])}function Ae(t,r){return function(t,r,a,s){Te()||V(!1);let{navigator:n}=e.useContext(Me),{matches:i}=e.useContext(De),l=i[i.length-1],o=l?l.params:{};!l||l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let c,m=Ee();if(r){var x;let e="string"==typeof r?X(r):r;"/"===d||(null==(x=e.pathname)?void 0:x.startsWith(d))||V(!1),c=e}else c=m;let u=c.pathname||"/",h=u;if("/"!==d){let e=d.replace(/^\//,"").split("/");h="/"+u.replace(/^\//,"").split("/").slice(e.length).join("/")}let p=ee(t,{pathname:h}),g=function(t,r,a,s){var n;void 0===r&&(r=[]);void 0===a&&(a=null);void 0===s&&(s=null);if(null==t){var i;if(!a)return null;if(a.errors)t=a.matches;else{if(!(null!=(i=s)&&i.v7_partialHydration&&0===r.length&&!a.initialized&&a.matches.length>0))return null;t=a.matches}}let l=t,o=null==(n=a)?void 0:n.errors;if(null!=o){let e=l.findIndex(e=>e.route.id&&void 0!==(null==o?void 0:o[e.route.id]));e>=0||V(!1),l=l.slice(0,Math.min(l.length,e+1))}let d=!1,c=-1;if(a&&s&&s.v7_partialHydration)for(let e=0;e<l.length;e++){let t=l[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(c=e),t.route.id){let{loaderData:e,errors:r}=a,s=t.route.loader&&void 0===e[t.route.id]&&(!r||void 0===r[t.route.id]);if(t.route.lazy||s){d=!0,l=c>=0?l.slice(0,c+1):[l[0]];break}}}return l.reduceRight((t,s,n)=>{let i,m=!1,x=null,u=null;var h;a&&(i=o&&s.route.id?o[s.route.id]:void 0,x=s.route.errorElement||He,d&&(c<0&&0===n?(ze[h="route-fallback"]||(ze[h]=!0),m=!0,u=null):c===n&&(m=!0,u=s.route.hydrateFallbackElement||null)));let p=r.concat(l.slice(0,n+1)),g=()=>{let r;return r=i?x:m?u:s.route.Component?e.createElement(s.route.Component,null):s.route.element?s.route.element:t,e.createElement(Oe,{match:s,routeContext:{outlet:t,matches:p,isDataRoute:null!=a},children:r})};return a&&(s.route.ErrorBoundary||s.route.errorElement||0===n)?e.createElement(We,{location:a.location,revalidation:a.revalidation,component:x,error:i,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}(p&&p.map(e=>Object.assign({},e,{params:Object.assign({},o,e.params),pathname:be([d,n.encodeLocation?n.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:be([d,n.encodeLocation?n.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),i,a,s);if(r&&g)return e.createElement(Se.Provider,{value:{location:we({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:R.Pop}},g);return g}(t,r)}function Re(){let t=function(){var t;let r=e.useContext(Fe),a=function(){let t=e.useContext(_e);return t||V(!1),t}(),s=Ie();if(void 0!==r)return r;return null==(t=a.errors)?void 0:t[s]}(),r=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),a=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},r),a?e.createElement("pre",{style:s},a):null,null)}const He=e.createElement(Re,null);class We extends e.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?e.createElement(De.Provider,{value:this.props.routeContext},e.createElement(Fe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Oe(t){let{routeContext:r,match:a,children:s}=t,n=e.useContext(Ce);return n&&n.static&&n.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=a.route.id),e.createElement(De.Provider,{value:r},s)}var Ue=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Ue||{}),qe=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(qe||{});function Ie(t){let r=function(){let t=e.useContext(De);return t||V(!1),t}(),a=r.matches[r.matches.length-1];return a.route.id||V(!1),a.route.id}const ze={};function Ve(t){let{to:r,replace:a,state:s,relative:n}=t;Te()||V(!1);let{future:i,static:l}=e.useContext(Me),{matches:o}=e.useContext(De),{pathname:d}=Ee(),c=Le(),m=ye(r,ge(o,i.v7_relativeSplatPath),d,"path"===n),x=JSON.stringify(m);return e.useEffect(()=>c(JSON.parse(x),{replace:a,state:s,relative:n}),[c,x,n,a,s]),null}function Je(t){return function(t){let r=e.useContext(De).outlet;return r?e.createElement(Pe.Provider,{value:t},r):r}(t.context)}function Ye(e){V(!1)}function Ke(t){let{basename:r="/",children:a=null,location:s,navigationType:n=R.Pop,navigator:i,static:l=!1,future:o}=t;Te()&&V(!1);let d=r.replace(/^\/*/,"/"),c=e.useMemo(()=>({basename:d,navigator:i,static:l,future:we({v7_relativeSplatPath:!1},o)}),[d,o,i,l]);"string"==typeof s&&(s=X(s));let{pathname:m="/",search:x="",hash:u="",state:h=null,key:p="default"}=s,g=e.useMemo(()=>{let e=he(m,d);return null==e?null:{location:{pathname:e,search:x,hash:u,state:h,key:p},navigationType:n}},[d,m,x,u,h,p,n]);return null==g?null:e.createElement(Me.Provider,{value:c},e.createElement(Se.Provider,{children:a,value:g}))}function Ge(e){let{children:t,location:r}=e;return Ae(Xe(t),r)}function Xe(t,r){void 0===r&&(r=[]);let a=[];return e.Children.forEach(t,(t,s)=>{if(!e.isValidElement(t))return;let n=[...r,s];if(t.type===e.Fragment)return void a.push.apply(a,Xe(t.props.children,n));t.type!==Ye&&V(!1),t.props.index&&t.props.children&&V(!1);let i={id:t.props.id||n.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(i.children=Xe(t.props.children,n)),a.push(i)}),a}
/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qe(){return Qe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Qe.apply(this,arguments)}new Promise(()=>{});const Ze=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(sr){}const et=r.startTransition;function tt(t){let{basename:r,children:a,future:s,window:n}=t,i=e.useRef();null==i.current&&(i.current=z({window:n,v5Compat:!0}));let l=i.current,[o,d]=e.useState({action:l.action,location:l.location}),{v7_startTransition:c}=s||{},m=e.useCallback(e=>{c&&et?et(()=>d(e)):d(e)},[d,c]);return e.useLayoutEffect(()=>l.listen(m),[l,m]),e.useEffect(()=>{return null==(e=s)||e.v7_startTransition,void(null==e||e.v7_relativeSplatPath);var e},[s]),e.createElement(Ke,{basename:r,children:a,location:o.location,navigationType:o.action,navigator:l,future:s})}const rt="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,at=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,st=e.forwardRef(function(t,r){let a,{onClick:s,relative:n,reloadDocument:i,replace:l,state:o,target:d,to:c,preventScrollReset:m,viewTransition:x}=t,u=function(e,t){if(null==e)return{};var r,a,s={},n=Object.keys(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)>=0||(s[r]=e[r]);return s}(t,Ze),{basename:h}=e.useContext(Me),p=!1;if("string"==typeof c&&at.test(c)&&(a=c,rt))try{let e=new URL(window.location.href),t=c.startsWith("//")?new URL(e.protocol+c):new URL(c),r=he(t.pathname,h);t.origin===e.origin&&null!=r?c=r+t.search+t.hash:p=!0}catch(sr){}let g=function(t,r){let{relative:a}=void 0===r?{}:r;Te()||V(!1);let{basename:s,navigator:n}=e.useContext(Me),{hash:i,pathname:l,search:o}=$e(t,{relative:a}),d=l;return"/"!==s&&(d="/"===l?s:be([s,l])),n.createHref({pathname:d,search:o,hash:i})}(c,{relative:n}),y=function(t,r){let{target:a,replace:s,state:n,preventScrollReset:i,relative:l,viewTransition:o}=void 0===r?{}:r,d=Le(),c=Ee(),m=$e(t,{relative:l});return e.useCallback(e=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(e,a)){e.preventDefault();let r=void 0!==s?s:G(c)===G(m);d(t,{replace:r,state:n,preventScrollReset:i,relative:l,viewTransition:o})}},[c,d,m,s,n,a,t,i,l,o])}(c,{replace:l,state:o,target:d,preventScrollReset:m,relative:n,viewTransition:x});return e.createElement("a",Qe({},u,{href:a||g,onClick:p||i?s:function(e){s&&s(e),e.defaultPrevented||y(e)},ref:r,target:d}))});var nt,it,lt,ot;(it=nt||(nt={})).UseScrollRestoration="useScrollRestoration",it.UseSubmit="useSubmit",it.UseSubmitFetcher="useSubmitFetcher",it.UseFetcher="useFetcher",it.useViewTransitionState="useViewTransitionState",(ot=lt||(lt={})).UseFetcher="useFetcher",ot.UseFetchers="useFetchers",ot.UseScrollRestoration="useScrollRestoration";const dt=s("https://avsqfibhfxrudoiwyafy.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF2c3FmaWJoZnhydWRvaXd5YWZ5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk3MzY3NDksImV4cCI6MjA2NTMxMjc0OX0.xelorgdtnDJadgY9vzshg2na3jkSIJlx5xnI6FRVKps"),ct=e.createContext(void 0);function mt({children:t}){const[r,a]=e.useState(null),[s,n]=e.useState(null),[i,l]=e.useState(!0);e.useEffect(()=>{dt.auth.getSession().then(({data:{session:e}})=>{n(e),a(e?.user??null),l(!1)});const{data:{subscription:e}}=dt.auth.onAuthStateChange((e,t)=>{n(t),a(t?.user??null),l(!1)});return()=>{e.unsubscribe()}},[]);const o={user:r,session:s,loading:i,signIn:async(e,t)=>{try{const{error:r}=await dt.auth.signInWithPassword({email:e,password:t});return{error:r}}catch(r){return{error:r}}},signUp:async(e,t)=>{try{const{data:r,error:a}=await dt.auth.signUp({email:e,password:t});return{error:a,user:r.user}}catch(r){return{error:r,user:null}}},signOut:async()=>{await dt.auth.signOut()}};return W.jsx(ct.Provider,{value:o,children:t})}function xt(){const t=e.useContext(ct);if(void 0===t)throw new Error("useAuth must be used within an AuthProvider");return t}function ut(e){return n({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"}},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"}}]})(e)}function ht(e){return n({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"}},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"}},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"}}]})(e)}function pt(e){return n({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}},{tag:"path",attr:{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"}}]})(e)}function gt(e){return n({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"}},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"}},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"}}]})(e)}function yt(e){return n({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 11 12 14 22 4"}},{tag:"path",attr:{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"}}]})(e)}function bt(e){return n({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"}}]})(e)}function ft(e){return n({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"polyline",attr:{points:"12 6 12 12 16 14"}}]})(e)}function jt(e){return n({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"}},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"}}]})(e)}function kt(e){return n({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}},{tag:"polyline",attr:{points:"7 10 12 15 17 10"}},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"}}]})(e)}function vt(e){return n({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"}}]})(e)}function Nt(e){return n({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}},{tag:"polyline",attr:{points:"14 2 14 8 20 8"}},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"}},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"}},{tag:"polyline",attr:{points:"10 9 9 9 8 9"}}]})(e)}function wt(e){return n({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"}}]})(e)}function Ct(e){return n({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"}}]})(e)}function _t(e){return n({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"}}]})(e)}function Mt(e){return n({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"}}]})(e)}function St(e){return n({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}},{tag:"polyline",attr:{points:"10 17 15 12 10 7"}},{tag:"line",attr:{x1:"15",y1:"12",x2:"3",y2:"12"}}]})(e)}function Dt(e){return n({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}},{tag:"polyline",attr:{points:"16 17 21 12 16 7"}},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"}}]})(e)}function Ft(e){return n({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}},{tag:"polyline",attr:{points:"22,6 12,13 2,6"}}]})(e)}function Tt(e){return n({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"}}]})(e)}function Et(e){return n({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"}},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"}},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"}}]})(e)}function Bt(e){return n({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"}}]})(e)}function Lt(e){return n({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"6",y:"4",width:"4",height:"16"}},{tag:"rect",attr:{x:"14",y:"4",width:"4",height:"16"}}]})(e)}function Pt(e){return n({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"}}]})(e)}function $t(e){return n({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}},{tag:"path",attr:{d:"M22 12A10 10 0 0 0 12 2v10z"}}]})(e)}function At(e){return n({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"}},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}}]})(e)}function Rt(e){return n({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 6 2 18 2 18 9"}},{tag:"path",attr:{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}},{tag:"rect",attr:{x:"6",y:"14",width:"12",height:"8"}}]})(e)}function Ht(e){return n({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"}},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}}]})(e)}function Wt(e){return n({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"}},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"}},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"}},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"}},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"}},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"}}]})(e)}function Ot(e){return n({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"5",width:"22",height:"14",rx:"7",ry:"7"}},{tag:"circle",attr:{cx:"16",cy:"12",r:"3"}}]})(e)}function Ut(e){return n({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"}},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"}},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"}}]})(e)}function qt(e){return n({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"}},{tag:"line",attr:{x1:"20",y1:"8",x2:"20",y2:"14"}},{tag:"line",attr:{x1:"23",y1:"11",x2:"17",y2:"11"}}]})(e)}function It(e){return n({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"}}]})(e)}function zt(e){return n({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"}},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"}},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"}}]})(e)}function Vt(e){return n({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"}},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"}}]})(e)}function Jt(){const{user:e,signOut:t}=xt(),r=Ee(),s=Le(),[n,i]=a.useState(!1),[l,o]=a.useState(()=>"undefined"!=typeof window&&("true"===localStorage.getItem("darkMode")||window.matchMedia("(prefers-color-scheme: dark)").matches));a.useEffect(()=>{l?(document.documentElement.classList.add("dark"),localStorage.setItem("darkMode","true")):(document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode","false"))},[l]);const d=()=>{o(!l)},c=async()=>{await t(),s("/login")},m=[{name:"Dashboard",href:"/",icon:_t},{name:"Customers",href:"/customers",icon:zt},{name:"Projects",href:"/projects",icon:pt},{name:"Tasks",href:"/tasks",icon:yt},{name:"Time Entries",href:"/time-entries",icon:ft},{name:"Reports",href:"/reports",icon:ht}],x=e=>r.pathname===e;return W.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex",children:[W.jsxs("div",{className:"hidden md:flex md:flex-col md:w-64 md:fixed md:inset-y-0 bg-white dark:bg-gray-800 shadow-md",children:[W.jsxs("div",{className:"flex-1 flex flex-col pt-5 pb-4 overflow-y-auto",children:[W.jsx("div",{className:"flex items-center justify-center flex-shrink-0 px-4 mb-5",children:W.jsx("h1",{className:"text-xl font-bold text-primary-600",children:"TimeTracker"})}),W.jsx("nav",{className:"mt-5 flex-1 px-2 space-y-1",children:m.map(e=>W.jsxs(st,{to:e.href,className:"group flex items-center px-4 py-3 text-sm font-medium rounded-md "+(x(e.href)?"bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"),children:[W.jsx(e.icon,{className:"mr-3 h-5 w-5 "+(x(e.href)?"text-primary-500 dark:text-primary-400":"text-gray-500 dark:text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300")}),e.name]},e.name))})]}),W.jsx("div",{className:"flex-shrink-0 flex border-t border-gray-200 dark:border-gray-700 p-4",children:W.jsx("div",{className:"flex-shrink-0 w-full group block",children:W.jsxs("div",{className:"flex items-center justify-between",children:[W.jsx("div",{children:W.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e?.email})}),W.jsxs("div",{className:"flex items-center space-x-2",children:[W.jsx("button",{onClick:d,className:"p-1 rounded-full text-gray-500 dark:text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none",children:l?W.jsx(Wt,{className:"h-5 w-5"}):W.jsx(Bt,{className:"h-5 w-5"})}),W.jsx("button",{onClick:c,className:"p-1 rounded-full text-gray-500 dark:text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none",children:W.jsx(Dt,{className:"h-5 w-5"})})]})]})})})]}),W.jsxs("div",{className:"md:hidden fixed top-0 inset-x-0 z-10 bg-white dark:bg-gray-800 shadow-md",children:[W.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[W.jsx("h1",{className:"text-xl font-bold text-primary-600",children:"TimeTracker"}),W.jsxs("div",{className:"flex items-center space-x-2",children:[W.jsx("button",{onClick:d,className:"p-1 rounded-full text-gray-500 dark:text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none",children:l?W.jsx(Wt,{className:"h-5 w-5"}):W.jsx(Bt,{className:"h-5 w-5"})}),W.jsx("button",{onClick:()=>i(!n),className:"p-1 rounded-full text-gray-500 dark:text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none",children:n?W.jsx(Vt,{className:"h-6 w-6"}):W.jsx(Et,{className:"h-6 w-6"})})]})]}),n&&W.jsxs("nav",{className:"px-2 pt-2 pb-3 space-y-1 bg-white dark:bg-gray-800 shadow-lg",children:[m.map(e=>W.jsxs(st,{to:e.href,className:"group flex items-center px-3 py-2 text-base font-medium rounded-md "+(x(e.href)?"bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"),onClick:()=>i(!1),children:[W.jsx(e.icon,{className:"mr-3 h-5 w-5 "+(x(e.href)?"text-primary-500 dark:text-primary-400":"text-gray-500 dark:text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300")}),e.name]},e.name)),W.jsxs("button",{onClick:c,className:"w-full group flex items-center px-3 py-2 text-base font-medium rounded-md text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:[W.jsx(Dt,{className:"mr-3 h-5 w-5 text-gray-500 dark:text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300"}),"Sign Out"]})]})]}),W.jsx("div",{className:"md:pl-64 flex flex-col flex-1",children:W.jsx("main",{className:"flex-1",children:W.jsx("div",{className:"py-6 px-4 sm:px-6 md:px-8 mt-14 md:mt-0",children:W.jsx(Je,{})})})})]})}function Yt(){const{user:t}=xt(),[r,a]=e.useState({customers:0,projects:0,tasks:0,timeEntries:0}),[s,n]=e.useState([{period:"Today",hours:0,icon:W.jsx(ft,{}),color:"bg-blue-500",dateRange:i(new Date,"MMM d")},{period:"This Week",hours:0,icon:W.jsx(ft,{}),color:"bg-green-500",dateRange:`${i(l(new Date),"MMM d")} - ${i(new Date,"MMM d")}`},{period:"This Month",hours:0,icon:W.jsx(gt,{}),color:"bg-purple-500",dateRange:i(new Date,"MMMM yyyy")},{period:"Last Month",hours:0,icon:W.jsx(gt,{}),color:"bg-orange-500",dateRange:i(o(new Date,1),"MMMM yyyy")}]),[g,y]=e.useState(!0),[b,f]=e.useState(null);e.useEffect(()=>{if(!t)return;(async()=>{try{y(!0);const[{count:e},{count:r},{count:s},{count:g}]=await Promise.all([dt.from("customers").select("id",{count:"exact",head:!0}).eq("user_id",t.id),dt.from("projects").select("id",{count:"exact",head:!0}).eq("user_id",t.id),dt.from("tasks").select("id",{count:"exact",head:!0}).eq("user_id",t.id),dt.from("time_entries").select("id",{count:"exact",head:!0}).eq("user_id",t.id)]);a({customers:e||0,projects:r||0,tasks:s||0,timeEntries:g||0});const{data:b,error:j}=await dt.from("time_entries").select("*").eq("user_id",t.id);if(j)return void console.error("Error fetching time entries:",j);f({entriesCount:b?.length||0,sampleEntries:b?.slice(0,3)||[]});const k=d(new Date),v=l(new Date),N=c(new Date),w=m(new Date),C=c(o(new Date,1)),_=m(o(new Date,1)),M=e=>{try{return e.date?x(e.date):e.start_time?x(e.start_time):e.created_at?x(e.created_at):null}catch(sr){return console.error("Error parsing date:",sr),null}},S=(e,t,r)=>!!e&&(r?(u(e,t)||h(e,t))&&(p(e,r)||h(e,r)):u(e,t)||h(e,t)),D=b?.filter(e=>{const t=M(e);return S(t,k)})||[],F=b?.filter(e=>{const t=M(e);return S(t,v)})||[],T=b?.filter(e=>{const t=M(e);return S(t,N,w)})||[],E=b?.filter(e=>{const t=M(e);return S(t,C,_)})||[],B=e=>{if(!e||0===e.length)return 0;let t=0;for(const r of e){if(null!==r.duration_minutes&&void 0!==r.duration_minutes){const e=parseFloat(String(r.duration_minutes));if(!isNaN(e)){t+=e;continue}}if(null!==r.duration&&void 0!==r.duration){const e=parseFloat(String(r.duration));if(!isNaN(e)){t+=e;continue}}if(r.start_time&&r.end_time)try{const e=x(r.start_time),a=x(r.end_time).getTime()-e.getTime(),s=Math.floor(a/6e4);s>0&&(t+=s)}catch(sr){console.error("Error calculating duration from timestamps:",sr)}}return Math.round(t/60*10)/10};n([{period:"Today",hours:B(D),icon:W.jsx(ft,{}),color:"bg-blue-500",dateRange:i(new Date,"MMM d")},{period:"This Week",hours:B(F),icon:W.jsx(ft,{}),color:"bg-green-500",dateRange:`${i(l(new Date),"MMM d")} - ${i(new Date,"MMM d")}`},{period:"This Month",hours:B(T),icon:W.jsx(gt,{}),color:"bg-purple-500",dateRange:i(new Date,"MMMM yyyy")},{period:"Last Month",hours:B(E),icon:W.jsx(gt,{}),color:"bg-orange-500",dateRange:i(o(new Date,1),"MMMM yyyy")}])}catch(e){console.error("Error fetching dashboard data:",e)}finally{y(!1)}})()},[t]);const j=[{title:"Customers",count:r.customers,icon:W.jsx(zt,{}),color:"bg-blue-500",link:"/customers"},{title:"Projects",count:r.projects,icon:W.jsx(Ct,{}),color:"bg-green-500",link:"/projects"},{title:"Tasks",count:r.tasks,icon:W.jsx(yt,{}),color:"bg-purple-500",link:"/tasks"},{title:"Time Entries",count:r.timeEntries,icon:W.jsx(ft,{}),color:"bg-orange-500",link:"/time-entries"}];return g?W.jsx("div",{className:"flex items-center justify-center h-full",children:W.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}):W.jsxs("div",{className:"space-y-6",children:[W.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[W.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Dashboard"}),W.jsx(st,{to:"/time-entries",className:"btn btn-primary w-full sm:w-auto text-center",children:"View All Time Entries"})]}),W.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4",children:j.map(e=>W.jsx(st,{to:e.link,className:"card hover:shadow-lg transition-shadow p-3 md:p-4",children:W.jsxs("div",{className:"flex items-center",children:[W.jsx("div",{className:`p-2 md:p-3 rounded-full ${e.color} text-white mr-2 md:mr-4 flex-shrink-0`,children:e.icon}),W.jsxs("div",{className:"min-w-0",children:[W.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 truncate",children:e.title}),W.jsx("p",{className:"text-lg md:text-2xl font-semibold text-gray-900 dark:text-white",children:e.count})]})]})},e.title))}),W.jsxs("div",{className:"card p-4",children:[W.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Time Highlights"}),W.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4",children:s.map(e=>W.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 md:p-4 shadow",children:W.jsxs("div",{className:"flex items-center",children:[W.jsx("div",{className:`p-2 md:p-3 rounded-full ${e.color} text-white mr-2 md:mr-4 flex-shrink-0`,children:e.icon}),W.jsxs("div",{className:"min-w-0",children:[W.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 truncate",children:e.period}),W.jsxs("p",{className:"text-lg md:text-2xl font-semibold text-gray-900 dark:text-white",children:[e.hours," hrs"]}),W.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:e.dateRange})]})]})},e.period))})]}),!1,W.jsxs("div",{className:"card p-4",children:[W.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Quick Actions"}),W.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4",children:[W.jsxs(st,{to:"/customers",className:"btn btn-secondary w-full flex items-center justify-center py-3",children:[W.jsx(zt,{className:"mr-2"})," ",W.jsx("span",{className:"truncate",children:"Add Customer"})]}),W.jsxs(st,{to:"/projects",className:"btn btn-secondary w-full flex items-center justify-center py-3",children:[W.jsx(Ct,{className:"mr-2"})," ",W.jsx("span",{className:"truncate",children:"Add Project"})]}),W.jsxs(st,{to:"/tasks",className:"btn btn-secondary w-full flex items-center justify-center py-3",children:[W.jsx(yt,{className:"mr-2"})," ",W.jsx("span",{className:"truncate",children:"Add Task"})]}),W.jsxs(st,{to:"/reports",className:"btn btn-secondary w-full flex items-center justify-center py-3",children:[W.jsx($t,{className:"mr-2"})," ",W.jsx("span",{className:"truncate",children:"View Reports"})]})]})]})]})}function Kt(){const[t,r]=e.useState(""),[a,s]=e.useState(""),[n,i]=e.useState(null),[l,o]=e.useState(!1),d=Le(),{signIn:c}=xt();return W.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:W.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white dark:bg-gray-800 p-8 rounded-lg shadow-md",children:[W.jsxs("div",{children:[W.jsx("h1",{className:"text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:"TimeTracker"}),W.jsx("h2",{className:"mt-6 text-center text-2xl font-bold text-gray-900 dark:text-white",children:"Sign in to your account"})]}),n&&W.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 p-3 rounded-md text-sm",children:n}),W.jsxs("form",{className:"mt-8 space-y-6",onSubmit:async e=>{if(e.preventDefault(),t&&a)try{i(null),o(!0);const{error:e}=await c(t,a);if(e)throw e;d("/")}catch(r){console.error("Login error:",r),i(r.message||"Failed to sign in")}finally{o(!1)}else i("Please enter both email and password")},children:[W.jsxs("div",{className:"rounded-md shadow-sm space-y-4",children:[W.jsxs("div",{children:[W.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email address"}),W.jsxs("div",{className:"relative",children:[W.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:W.jsx(Ft,{className:"h-5 w-5 text-gray-400"})}),W.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:e=>r(e.target.value),className:"appearance-none relative block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white dark:bg-gray-700 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Email address"})]})]}),W.jsxs("div",{children:[W.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password"}),W.jsxs("div",{className:"relative",children:[W.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:W.jsx(Mt,{className:"h-5 w-5 text-gray-400"})}),W.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:a,onChange:e=>s(e.target.value),className:"appearance-none relative block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white dark:bg-gray-700 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Password"})]})]})]}),W.jsx("div",{children:W.jsxs("button",{type:"submit",disabled:l,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[W.jsx("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:W.jsx(St,{className:"h-5 w-5 text-primary-500 group-hover:text-primary-400"})}),l?"Signing in...":"Sign in"]})}),W.jsx("div",{className:"text-center",children:W.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Don't have an account?"," ",W.jsx(st,{to:"/register",className:"font-medium text-primary-600 hover:text-primary-500 dark:text-primary-400 dark:hover:text-primary-300",children:"Sign up"})]})})]})]})})}function Gt(){const[t,r]=e.useState(""),[a,s]=e.useState(""),[n,i]=e.useState(""),[l,o]=e.useState(null),[d,c]=e.useState(!1),m=Le(),{signUp:x}=xt();return W.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:W.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white dark:bg-gray-800 p-8 rounded-lg shadow-md",children:[W.jsxs("div",{children:[W.jsx("h1",{className:"text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:"TimeTracker"}),W.jsx("h2",{className:"mt-6 text-center text-2xl font-bold text-gray-900 dark:text-white",children:"Create your account"})]}),l&&W.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 p-3 rounded-md text-sm",children:l}),W.jsxs("form",{className:"mt-8 space-y-6",onSubmit:async e=>{if(e.preventDefault(),t&&a&&n)if(a===n)if(a.length<6)o("Password must be at least 6 characters");else try{o(null),c(!0);const{error:e,user:r}=await x(t,a);if(e)throw e;m(r?"/":"/login")}catch(r){console.error("Registration error:",r),o(r.message||"Failed to create account")}finally{c(!1)}else o("Passwords do not match");else o("Please fill in all fields")},children:[W.jsxs("div",{className:"rounded-md shadow-sm space-y-4",children:[W.jsxs("div",{children:[W.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email address"}),W.jsxs("div",{className:"relative",children:[W.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:W.jsx(Ft,{className:"h-5 w-5 text-gray-400"})}),W.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:e=>r(e.target.value),className:"appearance-none relative block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white dark:bg-gray-700 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Email address"})]})]}),W.jsxs("div",{children:[W.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password"}),W.jsxs("div",{className:"relative",children:[W.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:W.jsx(Mt,{className:"h-5 w-5 text-gray-400"})}),W.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:a,onChange:e=>s(e.target.value),className:"appearance-none relative block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white dark:bg-gray-700 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Password"})]})]}),W.jsxs("div",{children:[W.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Confirm Password"}),W.jsxs("div",{className:"relative",children:[W.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:W.jsx(Mt,{className:"h-5 w-5 text-gray-400"})}),W.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,value:n,onChange:e=>i(e.target.value),className:"appearance-none relative block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white dark:bg-gray-700 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Confirm Password"})]})]})]}),W.jsx("div",{children:W.jsxs("button",{type:"submit",disabled:d,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[W.jsx("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:W.jsx(qt,{className:"h-5 w-5 text-primary-500 group-hover:text-primary-400"})}),d?"Creating account...":"Sign up"]})}),W.jsx("div",{className:"text-center",children:W.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Already have an account?"," ",W.jsx(st,{to:"/login",className:"font-medium text-primary-600 hover:text-primary-500 dark:text-primary-400 dark:hover:text-primary-300",children:"Sign in"})]})})]})]})})}function Xt(){const{user:t}=xt(),[r,a]=e.useState([]),[s,n]=e.useState(!0),[i,l]=e.useState(!1),[o,d]=e.useState(!1),[c,m]=e.useState(null),[x,u]=e.useState({name:"",email:"",phone:"",address:"",contact_person:"",is_active:!0}),[h,p]=e.useState(""),[g,y]=e.useState(null),[b,f]=e.useState(null);e.useEffect(()=>{t&&j()},[t]);const j=async()=>{try{n(!0);const{data:e,error:r}=await dt.from("customers").select("*").eq("user_id",t?.id).order("name");if(r)throw r;a(e||[])}catch(e){console.error("Error fetching customers:",e.message)}finally{n(!1)}},k=(e=null)=>{m(e),u(e?{name:e.name,email:e.email||"",phone:e.phone||"",address:e.address||"",contact_person:e.contact_person||"",is_active:!1!==e.is_active}:{name:"",email:"",phone:"",address:"",contact_person:"",is_active:!0}),l(!0)},v=()=>{l(!1),y(null)},N=e=>{m(e),d(!0)},w=()=>{d(!1)},C=e=>{const{name:t,value:r}=e.target;u(e=>({...e,[t]:r}))},_=r.filter(e=>e.name.toLowerCase().includes(h.toLowerCase())||e.email?.toLowerCase().includes(h.toLowerCase())||e.phone?.toLowerCase().includes(h.toLowerCase()));return W.jsxs("div",{children:[W.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[W.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4 sm:mb-0",children:"Customers"}),W.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[W.jsxs("div",{className:"relative",children:[W.jsx("input",{type:"text",placeholder:"Search customers...",className:"input pl-10",value:h,onChange:e=>p(e.target.value)}),W.jsx(Ht,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),h&&W.jsx("button",{onClick:()=>p(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:W.jsx(Vt,{})})]}),W.jsxs("button",{onClick:()=>k(),className:"btn btn-primary flex items-center justify-center",children:[W.jsx(At,{className:"mr-2"})," Add Customer"]})]})]}),s?W.jsx("div",{className:"flex justify-center py-8",children:W.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}):_.length>0?W.jsxs(W.Fragment,{children:[W.jsx("div",{className:"hidden sm:block bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden",children:W.jsx("div",{className:"overflow-x-auto",children:W.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[W.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:W.jsxs("tr",{children:[W.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),W.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Contact Person"}),W.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Email"}),W.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Phone"}),W.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),W.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Address"}),W.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),W.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:_.map(e=>W.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[W.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.name}),W.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:e.contact_person||"-"}),W.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:e.email||"-"}),W.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:e.phone||"-"}),W.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:W.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full "+(!1!==e.is_active?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"),children:!1!==e.is_active?"Active":"Inactive"})}),W.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-300 max-w-xs truncate",children:e.address||"-"}),W.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[W.jsx("button",{onClick:()=>k(e),className:"text-primary-600 hover:text-primary-900 dark:hover:text-primary-400 mr-3",children:W.jsx(vt,{className:"inline"})}),W.jsx("button",{onClick:()=>N(e),className:"text-red-600 hover:text-red-900 dark:hover:text-red-400",children:W.jsx(Ut,{className:"inline"})})]})]},e.id))})]})})}),W.jsx("div",{className:"sm:hidden space-y-4",children:_.map(e=>W.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden",children:[W.jsx("div",{className:"p-4 cursor-pointer",onClick:()=>{return t=e.id,void f(b===t?null:t);var t},children:W.jsxs("div",{className:"flex justify-between items-start",children:[W.jsxs("div",{children:[W.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:e.name}),e.contact_person&&W.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 flex items-center",children:[W.jsx(It,{className:"mr-1",size:14}),e.contact_person]})]}),W.jsxs("div",{className:"flex items-center",children:[W.jsx("span",{className:"mr-2 px-2 inline-flex text-xs leading-5 font-semibold rounded-full "+(!1!==e.is_active?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"),children:!1!==e.is_active?"Active":"Inactive"}),W.jsx(bt,{className:"transition-transform "+(b===e.id?"transform rotate-90":"")})]})]})}),b===e.id&&W.jsxs("div",{className:"px-4 pb-4 pt-2 border-t border-gray-100 dark:border-gray-700",children:[W.jsxs("div",{className:"space-y-2",children:[e.email&&W.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[W.jsx(Ft,{className:"mr-2 flex-shrink-0"}),W.jsx("span",{className:"truncate",children:e.email})]}),e.phone&&W.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[W.jsx(Pt,{className:"mr-2 flex-shrink-0"}),W.jsx("span",{children:e.phone})]}),e.address&&W.jsxs("div",{className:"flex items-start text-sm text-gray-500 dark:text-gray-400",children:[W.jsx(Tt,{className:"mr-2 mt-0.5 flex-shrink-0"}),W.jsx("span",{children:e.address})]})]}),W.jsxs("div",{className:"flex justify-end space-x-2 mt-4 pt-3 border-t border-gray-100 dark:border-gray-700",children:[W.jsxs("button",{onClick:t=>{t.stopPropagation(),k(e)},className:"btn btn-sm btn-secondary flex items-center","aria-label":"Edit customer",children:[W.jsx(vt,{className:"mr-1"})," Edit"]}),W.jsxs("button",{onClick:t=>{t.stopPropagation(),N(e)},className:"btn btn-sm btn-danger flex items-center","aria-label":"Delete customer",children:[W.jsx(Ut,{className:"mr-1"})," Delete"]})]})]})]},e.id))})]}):W.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg p-6 text-center",children:[W.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:h?"No customers match your search.":"No customers found. Add your first customer to get started."}),h?W.jsx("button",{onClick:()=>p(""),className:"btn btn-secondary",children:"Clear Search"}):W.jsxs("button",{onClick:()=>k(),className:"btn btn-primary flex items-center justify-center mx-auto",children:[W.jsx(At,{className:"mr-2"})," Add Customer"]})]}),i&&W.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:W.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[W.jsx("div",{className:"fixed inset-0 transition-opacity",onClick:v,children:W.jsx("div",{className:"absolute inset-0 bg-gray-500 dark:bg-gray-900 opacity-75"})}),W.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen",children:""}),W.jsx("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:W.jsxs("div",{className:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[W.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:c?"Edit Customer":"Add Customer"}),g&&W.jsx("div",{className:"mb-4 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 p-3 rounded-md text-sm",children:g}),W.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),x.name.trim())try{if(y(null),c){const{error:e}=await dt.from("customers").update({name:x.name,email:x.email,phone:x.phone,address:x.address,contact_person:x.contact_person,is_active:x.is_active}).eq("id",c.id);if(e)throw e}else{const{error:e}=await dt.from("customers").insert([{user_id:t?.id,name:x.name,email:x.email,phone:x.phone,address:x.address,contact_person:x.contact_person,is_active:x.is_active}]);if(e)throw e}v(),j()}catch(r){y(r.message)}else y("Customer name is required")},children:[W.jsxs("div",{className:"mb-4",children:[W.jsxs("label",{htmlFor:"name",className:"label",children:["Name ",W.jsx("span",{className:"text-red-600",children:"*"})]}),W.jsx("input",{type:"text",id:"name",name:"name",value:x.name,onChange:C,className:"input",required:!0})]}),W.jsxs("div",{className:"mb-4",children:[W.jsx("label",{htmlFor:"contact_person",className:"label",children:"Contact Person"}),W.jsx("input",{type:"text",id:"contact_person",name:"contact_person",value:x.contact_person,onChange:C,className:"input"})]}),W.jsxs("div",{className:"mb-4",children:[W.jsx("label",{htmlFor:"email",className:"label",children:"Email"}),W.jsx("input",{type:"email",id:"email",name:"email",value:x.email,onChange:C,className:"input"})]}),W.jsxs("div",{className:"mb-4",children:[W.jsx("label",{htmlFor:"phone",className:"label",children:"Phone"}),W.jsx("input",{type:"text",id:"phone",name:"phone",value:x.phone,onChange:C,className:"input"})]}),W.jsxs("div",{className:"mb-4",children:[W.jsx("label",{htmlFor:"address",className:"label",children:"Address"}),W.jsx("textarea",{id:"address",name:"address",value:x.address,onChange:C,className:"input",rows:3})]}),W.jsxs("div",{className:"mb-4 flex items-center",children:[W.jsx("input",{type:"checkbox",id:"is_active",name:"is_active",checked:x.is_active,onChange:e=>{const{name:t,checked:r}=e.target;u(e=>({...e,[t]:r}))},className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),W.jsx("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-900 dark:text-gray-300",children:"Active"})]}),W.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[W.jsx("button",{type:"button",onClick:v,className:"btn btn-secondary",children:"Cancel"}),W.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Create"})]})]})]})})]})}),o&&W.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:W.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[W.jsx("div",{className:"fixed inset-0 transition-opacity",onClick:w,children:W.jsx("div",{className:"absolute inset-0 bg-gray-500 dark:bg-gray-900 opacity-75"})}),W.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen",children:""}),W.jsx("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:W.jsxs("div",{className:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[W.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Delete Customer"}),g&&W.jsx("div",{className:"mb-4 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 p-3 rounded-md text-sm",children:g}),W.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Are you sure you want to delete ",W.jsx("span",{className:"font-semibold",children:c?.name}),"? This action cannot be undone."]}),W.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[W.jsx("button",{type:"button",onClick:w,className:"btn btn-secondary",children:"Cancel"}),W.jsx("button",{type:"button",onClick:async()=>{if(c)try{const{count:e,error:t}=await dt.from("projects").select("id",{count:"exact",head:!0}).eq("customer_id",c.id);if(t)throw t;if(e&&e>0)return void y(`Cannot delete customer. There are ${e} projects associated with this customer.`);const{error:r}=await dt.from("customers").delete().eq("id",c.id);if(r)throw r;w(),j()}catch(e){y(e.message)}},className:"btn btn-danger",children:"Delete"})]})]})})]})})]})}function Qt(){const{user:t}=xt(),[r,a]=e.useState([]),[s,n]=e.useState([]),[l,o]=e.useState(!0),[d,c]=e.useState(!1),[m,x]=e.useState(!1),[u,h]=e.useState(null),[p,g]=e.useState({name:"",description:"",status:"active",customer_id:"",start_date:"",end_date:"",budget:""}),[y,b]=e.useState(""),[f,j]=e.useState(null),[k,v]=e.useState(null);e.useEffect(()=>{t&&(N(),w())},[t]);const N=async()=>{try{o(!0);const{data:e,error:r}=await dt.from("projects").select("\n          *,\n          customer:customers(id, name)\n        ").eq("user_id",t?.id).order("name");if(r)throw r;a(e||[])}catch(e){console.error("Error fetching projects:",e.message)}finally{o(!1)}},w=async()=>{try{const{data:e,error:r}=await dt.from("customers").select("id, name").eq("user_id",t?.id).order("name");if(r)throw r;n(e||[])}catch(e){console.error("Error fetching customers:",e.message)}},C=(e=null)=>{h(e),g(e?{name:e.name,description:e.description||"",status:e.status||"active",customer_id:e.customer_id,start_date:e.start_date||"",end_date:e.end_date||"",budget:e.budget?String(e.budget):""}:{name:"",description:"",status:"active",customer_id:s.length>0?s[0].id:"",start_date:"",end_date:"",budget:""}),c(!0)},_=()=>{c(!1),j(null)},M=e=>{h(e),x(!0)},S=()=>{x(!1),j(null)},D=e=>{const{name:t,value:r}=e.target;g(e=>({...e,[t]:r}))},F=r.filter(e=>e.name.toLowerCase().includes(y.toLowerCase())||e.description?.toLowerCase().includes(y.toLowerCase())||e.customer?.name.toLowerCase().includes(y.toLowerCase())),T=e=>{switch(e){case"active":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"completed":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"on-hold":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";case"cancelled":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},E=e=>e.charAt(0).toUpperCase()+e.slice(1).replace("-"," ");return W.jsxs("div",{children:[W.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[W.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4 sm:mb-0",children:"Projects"}),W.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[W.jsxs("div",{className:"relative",children:[W.jsx("input",{type:"text",placeholder:"Search projects...",className:"input pl-10",value:y,onChange:e=>b(e.target.value)}),W.jsx(Ht,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),y&&W.jsx("button",{onClick:()=>b(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:W.jsx(Vt,{})})]}),W.jsxs("button",{onClick:()=>C(),className:"btn btn-primary flex items-center justify-center",disabled:0===s.length,children:[W.jsx(At,{className:"mr-2"})," Add Project"]})]})]}),0===s.length&&!l&&W.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-400 p-4 rounded-md mb-6",children:W.jsx("p",{children:"You need to create a customer before you can add projects."})}),l?W.jsx("div",{className:"flex justify-center py-8",children:W.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}):F.length>0?W.jsxs(W.Fragment,{children:[W.jsx("div",{className:"hidden sm:block bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden",children:W.jsx("div",{className:"overflow-x-auto",children:W.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[W.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:W.jsxs("tr",{children:[W.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),W.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Customer"}),W.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),W.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Description"}),W.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),W.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:F.map(e=>W.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[W.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.name}),W.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:e.customer?.name||"Unknown Customer"}),W.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:W.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${T(e.status)}`,children:E(e.status)})}),W.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-300 max-w-xs truncate",children:e.description||"-"}),W.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[W.jsx("button",{onClick:()=>C(e),className:"text-primary-600 hover:text-primary-900 dark:hover:text-primary-400 mr-3",children:W.jsx(vt,{className:"inline"})}),W.jsx("button",{onClick:()=>M(e),className:"text-red-600 hover:text-red-900 dark:hover:text-red-400",children:W.jsx(Ut,{className:"inline"})})]})]},e.id))})]})})}),W.jsx("div",{className:"sm:hidden space-y-4",children:F.map(e=>W.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden",children:[W.jsx("div",{className:"p-4 cursor-pointer",onClick:()=>{return t=e.id,void v(k===t?null:t);var t},children:W.jsxs("div",{className:"flex justify-between items-start",children:[W.jsxs("div",{children:[W.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:e.name}),W.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:e.customer?.name||"Unknown Customer"})]}),W.jsxs("div",{className:"flex items-center",children:[W.jsx("span",{className:`mr-2 px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${T(e.status)}`,children:E(e.status)}),W.jsx(bt,{className:"transition-transform "+(k===e.id?"transform rotate-90":"")})]})]})}),k===e.id&&W.jsxs("div",{className:"px-4 pb-4 pt-2 border-t border-gray-100 dark:border-gray-700",children:[W.jsxs("div",{className:"space-y-3",children:[e.description&&W.jsxs("div",{className:"flex items-start text-sm text-gray-500 dark:text-gray-400",children:[W.jsx(Nt,{className:"mr-2 mt-0.5 flex-shrink-0"}),W.jsx("span",{children:e.description})]}),e.budget&&W.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[W.jsx(jt,{className:"mr-2 flex-shrink-0"}),W.jsxs("span",{children:["Budget: ",new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e.budget)]})]}),W.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-gray-500 dark:text-gray-400",children:[e.start_date&&W.jsxs("div",{className:"flex items-center",children:[W.jsx(gt,{className:"mr-1 flex-shrink-0"}),W.jsxs("span",{children:["Start: ",i(new Date(e.start_date),"MMM d, yyyy")]})]}),e.end_date&&W.jsxs("div",{className:"flex items-center",children:[W.jsx(gt,{className:"mr-1 flex-shrink-0"}),W.jsxs("span",{children:["End: ",i(new Date(e.end_date),"MMM d, yyyy")]})]})]})]}),W.jsxs("div",{className:"flex justify-end space-x-2 mt-4 pt-3 border-t border-gray-100 dark:border-gray-700",children:[W.jsxs("button",{onClick:t=>{t.stopPropagation(),C(e)},className:"btn btn-sm btn-secondary flex items-center","aria-label":"Edit project",children:[W.jsx(vt,{className:"mr-1"})," Edit"]}),W.jsxs("button",{onClick:t=>{t.stopPropagation(),M(e)},className:"btn btn-sm btn-danger flex items-center","aria-label":"Delete project",children:[W.jsx(Ut,{className:"mr-1"})," Delete"]})]})]})]},e.id))})]}):W.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg p-6 text-center",children:[W.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:y?"No projects match your search.":"No projects found. Add your first project to get started."}),y?W.jsx("button",{onClick:()=>b(""),className:"btn btn-secondary",children:"Clear Search"}):s.length>0?W.jsxs("button",{onClick:()=>C(),className:"btn btn-primary flex items-center justify-center mx-auto",children:[W.jsx(At,{className:"mr-2"})," Add Project"]}):W.jsxs("button",{onClick:()=>window.location.href="/customers",className:"btn btn-primary flex items-center justify-center mx-auto",children:[W.jsx(At,{className:"mr-2"})," Add Customer First"]})]}),d&&W.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:W.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[W.jsx("div",{className:"fixed inset-0 transition-opacity",onClick:_,children:W.jsx("div",{className:"absolute inset-0 bg-gray-500 dark:bg-gray-900 opacity-75"})}),W.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen",children:""}),W.jsx("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:W.jsxs("div",{className:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[W.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:u?"Edit Project":"Add Project"}),f&&W.jsx("div",{className:"mb-4 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 p-3 rounded-md text-sm",children:f}),W.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),p.name.trim())if(p.customer_id)try{if(j(null),u){const{error:e}=await dt.from("projects").update({name:p.name,description:p.description,status:p.status,customer_id:p.customer_id,start_date:p.start_date||null,end_date:p.end_date||null,budget:p.budget?parseFloat(p.budget):null}).eq("id",u.id);if(e)throw e}else{const{error:e}=await dt.from("projects").insert([{user_id:t?.id,name:p.name,description:p.description,status:p.status,customer_id:p.customer_id,start_date:p.start_date||null,end_date:p.end_date||null,budget:p.budget?parseFloat(p.budget):null}]);if(e)throw e}_(),N()}catch(r){j(r.message)}else j("Please select a customer");else j("Project name is required")},children:[W.jsxs("div",{className:"mb-4",children:[W.jsxs("label",{htmlFor:"customer_id",className:"label",children:["Customer ",W.jsx("span",{className:"text-red-600",children:"*"})]}),W.jsxs("select",{id:"customer_id",name:"customer_id",value:p.customer_id,onChange:D,className:"input",required:!0,children:[W.jsx("option",{value:"",children:"Select a customer"}),s.map(e=>W.jsx("option",{value:e.id,children:e.name},e.id))]})]}),W.jsxs("div",{className:"mb-4",children:[W.jsxs("label",{htmlFor:"name",className:"label",children:["Project Name ",W.jsx("span",{className:"text-red-600",children:"*"})]}),W.jsx("input",{type:"text",id:"name",name:"name",value:p.name,onChange:D,className:"input",required:!0})]}),W.jsxs("div",{className:"mb-4",children:[W.jsx("label",{htmlFor:"status",className:"label",children:"Status"}),W.jsxs("select",{id:"status",name:"status",value:p.status,onChange:D,className:"input",children:[W.jsx("option",{value:"active",children:"Active"}),W.jsx("option",{value:"completed",children:"Completed"}),W.jsx("option",{value:"on-hold",children:"On Hold"}),W.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),W.jsxs("div",{className:"mb-4",children:[W.jsx("label",{htmlFor:"start_date",className:"label",children:"Start Date"}),W.jsx("input",{type:"date",id:"start_date",name:"start_date",value:p.start_date,onChange:D,className:"input"})]}),W.jsxs("div",{className:"mb-4",children:[W.jsx("label",{htmlFor:"end_date",className:"label",children:"End Date"}),W.jsx("input",{type:"date",id:"end_date",name:"end_date",value:p.end_date,onChange:D,className:"input"})]}),W.jsxs("div",{className:"mb-4",children:[W.jsx("label",{htmlFor:"budget",className:"label",children:"Budget"}),W.jsx("input",{type:"number",id:"budget",name:"budget",value:p.budget,onChange:D,className:"input",step:"0.01",min:"0"})]}),W.jsxs("div",{className:"mb-4",children:[W.jsx("label",{htmlFor:"description",className:"label",children:"Description"}),W.jsx("textarea",{id:"description",name:"description",value:p.description,onChange:D,className:"input",rows:3})]}),W.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[W.jsx("button",{type:"button",onClick:_,className:"btn btn-secondary",children:"Cancel"}),W.jsx("button",{type:"submit",className:"btn btn-primary",children:u?"Update":"Create"})]})]})]})})]})}),m&&W.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:W.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[W.jsx("div",{className:"fixed inset-0 transition-opacity",onClick:S,children:W.jsx("div",{className:"absolute inset-0 bg-gray-500 dark:bg-gray-900 opacity-75"})}),W.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen",children:""}),W.jsx("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:W.jsxs("div",{className:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[W.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Delete Project"}),f&&W.jsx("div",{className:"mb-4 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 p-3 rounded-md text-sm",children:f}),W.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Are you sure you want to delete ",W.jsx("span",{className:"font-semibold",children:u?.name}),"? This action cannot be undone."]}),W.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[W.jsx("button",{type:"button",onClick:S,className:"btn btn-secondary",children:"Cancel"}),W.jsx("button",{type:"button",onClick:async()=>{if(u)try{const{count:e,error:t}=await dt.from("tasks").select("id",{count:"exact",head:!0}).eq("project_id",u.id);if(t)throw t;if(e&&e>0)return void j(`Cannot delete project. There are ${e} tasks associated with this project.`);const{error:r}=await dt.from("projects").delete().eq("id",u.id);if(r)throw r;S(),N()}catch(e){j(e.message)}},className:"btn btn-danger",children:"Delete"})]})]})})]})})]})}function Zt(){const{user:t}=xt(),[r,a]=e.useState([]),[s,n]=e.useState(!0),[i,l]=e.useState(!1),[o,d]=e.useState(!1),[c,m]=e.useState(null),[x,u]=e.useState({name:"",description:""}),[h,p]=e.useState(""),[g,y]=e.useState(null);e.useEffect(()=>{t&&b()},[t]);const b=async()=>{try{n(!0);const{data:e,error:r}=await dt.from("tasks").select("*").eq("user_id",t?.id).order("name");if(r)throw r;a(e||[])}catch(e){console.error("Error fetching tasks:",e.message)}finally{n(!1)}},f=(e=null)=>{m(e),u(e?{name:e.name,description:e.description||""}:{name:"",description:""}),l(!0)},j=()=>{l(!1),y(null)},k=()=>{d(!1),y(null)},v=e=>{const{name:t,value:r}=e.target;u(e=>({...e,[t]:r}))},N=r.filter(e=>e.name.toLowerCase().includes(h.toLowerCase())||e.description?.toLowerCase().includes(h.toLowerCase()));return W.jsxs("div",{children:[W.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[W.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4 sm:mb-0",children:"Tasks"}),W.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[W.jsxs("div",{className:"relative",children:[W.jsx("input",{type:"text",placeholder:"Search tasks...",className:"input pl-10",value:h,onChange:e=>p(e.target.value)}),W.jsx(Ht,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),h&&W.jsx("button",{onClick:()=>p(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:W.jsx(Vt,{})})]}),W.jsxs("button",{onClick:()=>f(),className:"btn btn-primary flex items-center justify-center",children:[W.jsx(At,{className:"mr-2"})," Add Task"]})]})]}),s?W.jsx("div",{className:"flex justify-center py-8",children:W.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}):N.length>0?W.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden",children:W.jsx("div",{className:"overflow-x-auto",children:W.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[W.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:W.jsxs("tr",{children:[W.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),W.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Description"}),W.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),W.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:N.map(e=>W.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[W.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.name}),W.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-300",children:e.description||"-"}),W.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[W.jsx("button",{onClick:()=>f(e),className:"text-primary-600 hover:text-primary-900 dark:hover:text-primary-400 mr-3",children:W.jsx(vt,{className:"inline"})}),W.jsx("button",{onClick:()=>(e=>{m(e),d(!0)})(e),className:"text-red-600 hover:text-red-900 dark:hover:text-red-400",children:W.jsx(Ut,{className:"inline"})})]})]},e.id))})]})})}):W.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg p-6 text-center",children:[W.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:h?"No tasks match your search.":"No tasks found. Add your first task to get started."}),h?W.jsx("button",{onClick:()=>p(""),className:"btn btn-secondary",children:"Clear Search"}):W.jsxs("button",{onClick:()=>f(),className:"btn btn-primary flex items-center justify-center mx-auto",children:[W.jsx(At,{className:"mr-2"})," Add Task"]})]}),i&&W.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:W.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[W.jsx("div",{className:"fixed inset-0 transition-opacity",onClick:j,children:W.jsx("div",{className:"absolute inset-0 bg-gray-500 dark:bg-gray-900 opacity-75"})}),W.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen",children:""}),W.jsx("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:W.jsxs("div",{className:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[W.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:c?"Edit Task":"Add Task"}),g&&W.jsx("div",{className:"mb-4 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 p-3 rounded-md text-sm",children:g}),W.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),x.name.trim())try{if(y(null),c){const{error:e}=await dt.from("tasks").update({name:x.name,description:x.description}).eq("id",c.id);if(e)throw e}else{const{error:e}=await dt.from("tasks").insert([{user_id:t?.id,name:x.name,description:x.description}]);if(e)throw e}j(),b()}catch(r){y(r.message)}else y("Task name is required")},children:[W.jsxs("div",{className:"mb-4",children:[W.jsxs("label",{htmlFor:"name",className:"label",children:["Task Name ",W.jsx("span",{className:"text-red-600",children:"*"})]}),W.jsx("input",{type:"text",id:"name",name:"name",value:x.name,onChange:v,className:"input",required:!0})]}),W.jsxs("div",{className:"mb-4",children:[W.jsx("label",{htmlFor:"description",className:"label",children:"Description"}),W.jsx("textarea",{id:"description",name:"description",value:x.description,onChange:v,className:"input",rows:3})]}),W.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[W.jsx("button",{type:"button",onClick:j,className:"btn btn-secondary",children:"Cancel"}),W.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Create"})]})]})]})})]})}),o&&W.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:W.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[W.jsx("div",{className:"fixed inset-0 transition-opacity",onClick:k,children:W.jsx("div",{className:"absolute inset-0 bg-gray-500 dark:bg-gray-900 opacity-75"})}),W.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen",children:""}),W.jsx("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:W.jsxs("div",{className:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[W.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Delete Task"}),g&&W.jsx("div",{className:"mb-4 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 p-3 rounded-md text-sm",children:g}),W.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Are you sure you want to delete ",W.jsx("span",{className:"font-semibold",children:c?.name}),"? This action cannot be undone."]}),W.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[W.jsx("button",{type:"button",onClick:k,className:"btn btn-secondary",children:"Cancel"}),W.jsx("button",{type:"button",onClick:async()=>{if(c)try{const{count:e,error:t}=await dt.from("time_entries").select("id",{count:"exact",head:!0}).eq("task_id",c.id);if(t)throw t;if(e&&e>0)return void y(`Cannot delete task. There are ${e} time entries associated with this task.`);const{error:r}=await dt.from("tasks").delete().eq("id",c.id);if(r)throw r;k(),b()}catch(e){y(e.message)}},className:"btn btn-danger",children:"Delete"})]})]})})]})})]})}function er(){const{user:t}=xt(),[r,a]=e.useState([]),[s,n]=e.useState([]),[y,b]=e.useState([]),[f,j]=e.useState([]),[k,v]=e.useState(!0),[N,w]=e.useState(null),[C,_]=e.useState(0),[M,S]=e.useState(!1),[D,F]=e.useState(!1),[T,E]=e.useState(null),[B,L]=e.useState({task_id:"",project_id:"",customer_id:"",date:"",duration_hours:"",duration_minutes:"",description:"",billable:!0,active:!0}),[P,$]=e.useState(""),[A,R]=e.useState(null),[H,O]=e.useState({task:"",project:"",customer:"",dateFrom:"",dateTo:"",billable:"",active:""}),[U,q]=e.useState(!1),[I,z]=e.useState(null),[V,J]=e.useState([{period:"Today",hours:0,icon:W.jsx(ft,{}),color:"bg-blue-500",dateRange:i(new Date,"MMM d")},{period:"This Week",hours:0,icon:W.jsx(ft,{}),color:"bg-green-500",dateRange:`${i(l(new Date),"MMM d")} - ${i(new Date,"MMM d")}`},{period:"This Month",hours:0,icon:W.jsx(gt,{}),color:"bg-purple-500",dateRange:i(new Date,"MMMM yyyy")},{period:"Last Month",hours:0,icon:W.jsx(gt,{}),color:"bg-orange-500",dateRange:i(o(new Date,1),"MMMM yyyy")}]);e.useEffect(()=>{t&&(Y(),G(),X(),Q())},[t]),e.useEffect(()=>{const e=setInterval(()=>{N&&_(e=>e+1)},1e3);return()=>clearInterval(e)},[N]);const Y=async()=>{try{v(!0);const{data:e,error:r}=await dt.from("time_entries").select("\n          *,\n          task:tasks(\n            id,\n            name\n          ),\n          project:projects(\n            id,\n            name,\n            customer_id\n          ),\n          customer:customers(\n            id,\n            name\n          )\n        ").eq("user_id",t?.id).is("end_time",null).not("start_time","is",null).single();if(r&&"PGRST116"!==r.code&&console.error("Error fetching active timer:",r),e){w(e);const t=new Date(e.start_time||""),r=g(new Date,t);_(r)}else w(null),_(0);let s=dt.from("time_entries").select("\n          *,\n          task:tasks(\n            id,\n            name\n          ),\n          project:projects(\n            id,\n            name,\n            customer_id\n          ),\n          customer:customers(\n            id,\n            name\n          )\n        ").eq("user_id",t?.id).order("created_at",{ascending:!1});const{data:n,error:i}=await s;if(i)throw console.error("Error fetching time entries:",i),i;a(n||[]),K(n||[])}catch(e){console.error("Error fetching time entries:",e.message)}finally{v(!1)}},K=e=>{const t=d(new Date),r=l(new Date),a=c(new Date),s=m(new Date),n=c(o(new Date,1)),g=m(o(new Date,1)),y=e=>{try{return e.date?x(e.date):e.start_time?x(e.start_time):e.created_at?x(e.created_at):null}catch(sr){return console.error("Error parsing date:",sr),null}},b=(e,t,r)=>!!e&&(r?(u(e,t)||h(e,t))&&(p(e,r)||h(e,r)):u(e,t)||h(e,t)),f=e.filter(e=>{const r=y(e);return b(r,t)}),j=e.filter(e=>{const t=y(e);return b(t,r)}),k=e.filter(e=>{const t=y(e);return b(t,a,s)}),v=e.filter(e=>{const t=y(e);return b(t,n,g)}),N=e=>{if(!e||0===e.length)return 0;let t=0;for(const r of e){if(null!==r.duration_minutes&&void 0!==r.duration_minutes){const e=parseFloat(String(r.duration_minutes));if(!isNaN(e)){t+=e;continue}}if(r.start_time&&r.end_time)try{const e=x(r.start_time),a=x(r.end_time).getTime()-e.getTime(),s=Math.floor(a/6e4);s>0&&(t+=s)}catch(sr){console.error("Error calculating duration from timestamps:",sr)}}return Math.round(t/60*10)/10};J([{period:"Today",hours:N(f),icon:W.jsx(ft,{}),color:"bg-blue-500",dateRange:i(new Date,"MMM d")},{period:"This Week",hours:N(j),icon:W.jsx(ft,{}),color:"bg-green-500",dateRange:`${i(l(new Date),"MMM d")} - ${i(new Date,"MMM d")}`},{period:"This Month",hours:N(k),icon:W.jsx(gt,{}),color:"bg-purple-500",dateRange:i(new Date,"MMMM yyyy")},{period:"Last Month",hours:N(v),icon:W.jsx(gt,{}),color:"bg-orange-500",dateRange:i(o(new Date,1),"MMMM yyyy")}])},G=async()=>{try{const{data:e,error:r}=await dt.from("tasks").select("\n          id,\n          name\n        ").eq("user_id",t?.id).order("name");if(r)throw r;n(e||[])}catch(e){console.error("Error fetching tasks:",e.message)}},X=async()=>{try{const{data:e,error:r}=await dt.from("projects").select("\n          id,\n          name,\n          customer_id\n        ").eq("user_id",t?.id).order("name");if(r)throw r;b(e||[])}catch(e){console.error("Error fetching projects:",e.message)}},Q=async()=>{try{const{data:e,error:r}=await dt.from("customers").select("\n          id,\n          name\n        ").eq("user_id",t?.id).order("name");if(r)throw r;j(e||[])}catch(e){console.error("Error fetching customers:",e.message)}},Z=(e=null)=>{if(E(e),e){const t=e.date||(e.start_time?i(x(e.start_time),"yyyy-MM-dd"):i(new Date,"yyyy-MM-dd"));let r="",a="";if(null!==e.duration_minutes)r=Math.floor(e.duration_minutes/60).toString(),a=(e.duration_minutes%60).toString();else if(e.start_time&&e.end_time){const t=g(new Date(e.end_time),new Date(e.start_time)),s=Math.floor(t/60);r=Math.floor(s/60).toString(),a=(s%60).toString()}L({task_id:e.task_id,project_id:e.project_id||"",customer_id:e.customer_id||e.project?.customer_id||"",date:t,duration_hours:r,duration_minutes:a,description:e.description||"",billable:!1!==e.billable,active:!1!==e.active})}else{const e=i(new Date,"yyyy-MM-dd");L({task_id:"",project_id:"",customer_id:"",date:e,duration_hours:"",duration_minutes:"",description:"",billable:!0,active:!0})}S(!0)},ee=()=>{S(!1),R(null)},te=e=>{E(e),F(!0)},re=()=>{F(!1),R(null)},ae=()=>{q(!1)},se=e=>{const{name:t,value:r}=e.target;L(e=>({...e,[t]:r}))},ne=e=>{const{name:t,checked:r}=e.target;L(e=>({...e,[t]:r}))},ie=e=>{const{name:t,value:r}=e.target;O(e=>({...e,[t]:r}))},le=()=>{O({task:"",project:"",customer:"",dateFrom:"",dateTo:"",billable:"",active:""}),ae(),Y()},oe=async()=>{if(N)try{const e=(new Date).toISOString(),t=N.start_time?new Date(N.start_time):new Date,r=g(new Date(e),t),a=Math.ceil(r/60),{error:s}=await dt.from("time_entries").update({end_time:e,duration_minutes:a,date:i(t,"yyyy-MM-dd")}).eq("id",N.id);if(s)throw s;w(null),_(0),Y()}catch(e){console.error("Error stopping timer:",e.message)}},de=(e,t,r)=>{if(null!==e){return`${Math.floor(e/60)}h ${e%60}m`}if(t&&r){const e=new Date(t),a=new Date(r),s=g(a,e),n=Math.floor(s/60);return`${Math.floor(n/60)}h ${n%60}m`}return"-"},ce=r.filter(e=>{const t=(e.task?.name||"").toLowerCase().includes(P.toLowerCase())||(e.project?.name||"").toLowerCase().includes(P.toLowerCase())||(e.customer?.name||"").toLowerCase().includes(P.toLowerCase())||(e.description||"").toLowerCase().includes(P.toLowerCase());let r=!0;H.task&&e.task_id!==H.task&&(r=!1),H.project&&e.project_id!==H.project&&(r=!1),H.customer&&e.customer_id!==H.customer&&(r=!1),H.billable&&("yes"!==H.billable||e.billable?"no"===H.billable&&e.billable&&(r=!1):r=!1),H.active&&("yes"!==H.active||e.active?"no"===H.active&&e.active&&(r=!1):r=!1);const a=e.date?new Date(e.date):e.start_time?new Date(e.start_time):null;if(H.dateFrom&&a){const e=new Date(H.dateFrom);e.setHours(0,0,0,0),a<e&&(r=!1)}if(H.dateTo&&a){const e=new Date(H.dateTo);e.setHours(23,59,59,999),a>e&&(r=!1)}return t&&r}),me=B.customer_id?y.filter(e=>e.customer_id===B.customer_id):y;return W.jsxs("div",{children:[W.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[W.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4 sm:mb-0",children:"Time Entries"}),W.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[W.jsxs("div",{className:"relative",children:[W.jsx("input",{type:"text",placeholder:"Search entries...",className:"input pl-10",value:P,onChange:e=>$(e.target.value)}),W.jsx(Ht,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),P&&W.jsx("button",{onClick:()=>$(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:W.jsx(Vt,{})})]}),W.jsxs("div",{className:"flex space-x-2",children:[W.jsxs("button",{onClick:()=>{q(!0)},className:"btn btn-secondary flex-1 sm:flex-none flex items-center justify-center","aria-label":"Filter entries",children:[W.jsx(wt,{className:"mr-2"})," Filter"]}),W.jsxs("button",{onClick:()=>Z(),className:"btn btn-primary flex-1 sm:flex-none flex items-center justify-center","aria-label":"Add new time entry",children:[W.jsx(At,{className:"mr-2"})," New Entry"]})]})]})]}),W.jsxs("div",{className:"card p-4 mb-6",children:[W.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Time Highlights"}),W.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4",children:V.map(e=>W.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 md:p-4 shadow",children:W.jsxs("div",{className:"flex items-center",children:[W.jsx("div",{className:`p-2 md:p-3 rounded-full ${e.color} text-white mr-2 md:mr-4 flex-shrink-0`,children:e.icon}),W.jsxs("div",{className:"min-w-0",children:[W.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 truncate",children:e.period}),W.jsxs("p",{className:"text-lg md:text-2xl font-semibold text-gray-900 dark:text-white",children:[e.hours," hrs"]}),W.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:e.dateRange})]})]})},e.period))})]}),N&&W.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg p-4 mb-6",children:W.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[W.jsxs("div",{className:"mb-4 md:mb-0",children:[W.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[W.jsx(ft,{className:"mr-2 text-primary-600"})," Active Timer"]}),W.jsxs("div",{className:"mt-2",children:[W.jsx("p",{className:"text-2xl font-bold text-primary-600",children:(e=>{const t=Math.floor(e/3600),r=Math.floor(e%3600/60),a=e%60;return`${t.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`})(C)}),W.jsxs("p",{className:"mt-1 text-gray-600 dark:text-gray-400",children:[N.customer?.name||"No Customer"," / ",N.project?.name||"No Project"," / ",N.task?.name||"Unknown Task"]}),N.description&&W.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-500",children:N.description})]})]}),W.jsx("div",{children:W.jsxs("button",{onClick:oe,className:"btn btn-primary flex items-center",children:[W.jsx(Lt,{className:"mr-2"})," Stop Timer"]})})]})}),(0===s.length||0===y.length||0===f.length)&&!k&&W.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-400 p-4 rounded-md mb-6",children:[W.jsxs("p",{children:[0===s.length&&"You need to create a task before you can track time. ",0===y.length&&"You need to create a project before you can track time. ",0===f.length&&"You need to create a customer before you can track time. ","Each time entry must be associated with a task, project, and customer."]}),W.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[0===s.length&&W.jsxs("button",{onClick:()=>window.location.href="/tasks",className:"btn btn-primary btn-sm flex items-center justify-center",children:[W.jsx(At,{className:"mr-2"})," Create a Task"]}),0===y.length&&W.jsxs("button",{onClick:()=>window.location.href="/projects",className:"btn btn-primary btn-sm flex items-center justify-center",children:[W.jsx(At,{className:"mr-2"})," Create a Project"]}),0===f.length&&W.jsxs("button",{onClick:()=>window.location.href="/customers",className:"btn btn-primary btn-sm flex items-center justify-center",children:[W.jsx(At,{className:"mr-2"})," Create a Customer"]})]})]}),k?W.jsx("div",{className:"flex justify-center py-8",children:W.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}):ce.length>0?W.jsxs(W.Fragment,{children:[W.jsx("div",{className:"hidden sm:block bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden",children:W.jsx("div",{className:"overflow-x-auto",children:W.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[W.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:W.jsxs("tr",{children:[W.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Customer / Project / Task"}),W.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Date"}),W.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Duration"}),W.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),W.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Description"}),W.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),W.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:ce.map(e=>W.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[W.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-gray-900 dark:text-white",children:[W.jsx("div",{children:W.jsx("span",{className:"font-medium",children:e.customer?.name||"Unknown Customer"})}),W.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.project?.name||"Unknown Project"," / ",e.task?.name||"Unknown Task"]})]}),W.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:e.date?i(new Date(e.date),"MMM d, yyyy"):e.start_time?i(new Date(e.start_time),"MMM d, yyyy"):"-"}),W.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:de(e.duration_minutes,e.start_time,e.end_time)}),W.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:W.jsxs("div",{className:"flex flex-col space-y-1",children:[W.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+(e.billable?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"),children:[W.jsx(jt,{className:"mr-1 "+(e.billable?"opacity-100":"opacity-50")}),e.billable?"Billable":"Non-billable"]}),W.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+(e.active?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"),children:[W.jsx(Ot,{className:"mr-1 "+(e.active?"opacity-100":"opacity-50")}),e.active?"Active":"Inactive"]})]})}),W.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-300 max-w-xs truncate",children:e.description||"-"}),W.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[!e.end_time&&e.start_time?W.jsx("button",{onClick:oe,className:"text-primary-600 hover:text-primary-900 dark:hover:text-primary-400 mr-3",children:W.jsx(Lt,{className:"inline"})}):W.jsx(W.Fragment,{}),W.jsx("button",{onClick:()=>Z(e),className:"text-primary-600 hover:text-primary-900 dark:hover:text-primary-400 mr-3",children:W.jsx(vt,{className:"inline"})}),W.jsx("button",{onClick:()=>te(e),className:"text-red-600 hover:text-red-900 dark:hover:text-red-400",children:W.jsx(Ut,{className:"inline"})})]})]},e.id))})]})})}),W.jsx("div",{className:"sm:hidden space-y-4",children:ce.map(e=>W.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden",children:[W.jsxs("div",{className:"p-4 cursor-pointer",onClick:()=>{return t=e.id,void z(I===t?null:t);var t},children:[W.jsxs("div",{className:"flex justify-between items-start",children:[W.jsxs("div",{children:[W.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:e.task?.name||"Unknown Task"}),W.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.customer?.name||"Unknown Customer"," / ",e.project?.name||"Unknown Project"]})]}),W.jsxs("div",{className:"flex items-center",children:[W.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mr-2",children:de(e.duration_minutes,e.start_time,e.end_time)}),W.jsx(bt,{className:"transition-transform "+(I===e.id?"transform rotate-90":"")})]})]}),W.jsxs("div",{className:"mt-2 flex items-center text-xs text-gray-500 dark:text-gray-400",children:[W.jsx(gt,{className:"mr-1"}),W.jsx("span",{children:e.date?i(new Date(e.date),"MMM d, yyyy"):e.start_time?i(new Date(e.start_time),"MMM d, yyyy"):"-"})]})]}),I===e.id&&W.jsxs("div",{className:"px-4 pb-4 pt-2 border-t border-gray-100 dark:border-gray-700",children:[W.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[W.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+(e.billable?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"),children:[W.jsx(jt,{className:"mr-1 "+(e.billable?"opacity-100":"opacity-50")}),e.billable?"Billable":"Non-billable"]}),W.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+(e.active?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"),children:[W.jsx(Ot,{className:"mr-1 "+(e.active?"opacity-100":"opacity-50")}),e.active?"Active":"Inactive"]})]}),e.description&&W.jsxs("div",{className:"mb-3",children:[W.jsx("h4",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Description:"}),W.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:e.description})]}),W.jsxs("div",{className:"flex justify-between mt-3 pt-3 border-t border-gray-100 dark:border-gray-700",children:[W.jsx("div",{className:"flex space-x-2",children:!e.end_time&&e.start_time?W.jsxs("button",{onClick:e=>{e.stopPropagation(),oe()},className:"btn btn-sm btn-primary flex items-center","aria-label":"Stop timer",children:[W.jsx(Lt,{className:"mr-1"})," Stop"]}):W.jsx(W.Fragment,{})}),W.jsxs("div",{className:"flex space-x-2",children:[W.jsxs("button",{onClick:t=>{t.stopPropagation(),Z(e)},className:"btn btn-sm btn-secondary flex items-center","aria-label":"Edit time entry",children:[W.jsx(vt,{className:"mr-1"})," Edit"]}),W.jsxs("button",{onClick:t=>{t.stopPropagation(),te(e)},className:"btn btn-sm btn-danger flex items-center","aria-label":"Delete time entry",children:[W.jsx(Ut,{className:"mr-1"})," Delete"]})]})]})]})]},e.id))})]}):W.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg p-6 text-center",children:[W.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:P||Object.values(H).some(e=>e)?"No time entries match your search or filters.":"No time entries found. Add your first time entry to get started."}),P||Object.values(H).some(e=>e)?W.jsxs("div",{className:"flex justify-center space-x-2",children:[P&&W.jsx("button",{onClick:()=>$(""),className:"btn btn-secondary",children:"Clear Search"}),Object.values(H).some(e=>e)&&W.jsx("button",{onClick:le,className:"btn btn-secondary",children:"Clear Filters"})]}):s.length>0&&y.length>0&&f.length>0?W.jsxs("button",{onClick:()=>Z(),className:"btn btn-primary flex items-center justify-center mx-auto",children:[W.jsx(At,{className:"mr-2"})," Add Time Entry"]}):W.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[0===s.length&&W.jsxs("button",{onClick:()=>window.location.href="/tasks",className:"btn btn-primary flex items-center justify-center",children:[W.jsx(At,{className:"mr-2"})," Add Task First"]}),0===y.length&&W.jsxs("button",{onClick:()=>window.location.href="/projects",className:"btn btn-primary flex items-center justify-center",children:[W.jsx(At,{className:"mr-2"})," Add Project First"]}),0===f.length&&W.jsxs("button",{onClick:()=>window.location.href="/customers",className:"btn btn-primary flex items-center justify-center",children:[W.jsx(At,{className:"mr-2"})," Add Customer First"]})]})]}),M&&W.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:W.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[W.jsx("div",{className:"fixed inset-0 transition-opacity",onClick:ee,children:W.jsx("div",{className:"absolute inset-0 bg-gray-500 dark:bg-gray-900 opacity-75"})}),W.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen",children:""}),W.jsx("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:W.jsxs("div",{className:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[W.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:T?"Edit Time Entry":"Add Time Entry"}),A&&W.jsx("div",{className:"mb-4 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 p-3 rounded-md text-sm",children:A}),W.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!B.task_id)return void R("Please select a task");if(!B.project_id)return void R("Please select a project");if(!B.customer_id)return void R("Please select a customer");if(!B.date)return void R("Date is required");const r=parseInt(B.duration_hours)||0,a=parseInt(B.duration_minutes)||0;if(0===r&&0===a)return void R("Please enter a duration");const s=60*r+a;try{if(R(null),T){const{error:e}=await dt.from("time_entries").update({task_id:B.task_id,project_id:B.project_id,customer_id:B.customer_id,date:B.date,duration_minutes:s,description:B.description,billable:B.billable,active:B.active}).eq("id",T.id);if(e)throw console.error("Error updating time entry:",e),e}else{const{error:e}=await dt.from("time_entries").insert([{user_id:t?.id,task_id:B.task_id,project_id:B.project_id,customer_id:B.customer_id,date:B.date,duration_minutes:s,description:B.description,billable:B.billable,active:B.active}]);if(e)throw console.error("Error creating time entry:",e),e}ee(),Y()}catch(n){console.error("Error in handleSubmit:",n),R(n.message)}},children:[W.jsxs("div",{className:"mb-4",children:[W.jsxs("label",{htmlFor:"customer_id",className:"label",children:["Customer ",W.jsx("span",{className:"text-red-600",children:"*"})]}),W.jsxs("select",{id:"customer_id",name:"customer_id",value:B.customer_id,onChange:e=>{const t=e.target.value;L(e=>({...e,customer_id:t,project_id:"",task_id:""}))},className:"input",required:!0,children:[W.jsx("option",{value:"",children:"Select a customer"}),f.map(e=>W.jsx("option",{value:e.id,children:e.name},e.id))]})]}),W.jsxs("div",{className:"mb-4",children:[W.jsxs("label",{htmlFor:"project_id",className:"label",children:["Project ",W.jsx("span",{className:"text-red-600",children:"*"})]}),W.jsxs("select",{id:"project_id",name:"project_id",value:B.project_id,onChange:e=>{const t=e.target.value;L(e=>({...e,project_id:t,task_id:""}))},className:"input",required:!0,disabled:!B.customer_id,children:[W.jsx("option",{value:"",children:"Select a project"}),me.map(e=>W.jsx("option",{value:e.id,children:e.name},e.id))]}),!B.customer_id&&W.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Select a customer first"})]}),W.jsxs("div",{className:"mb-4",children:[W.jsxs("label",{htmlFor:"task_id",className:"label",children:["Task ",W.jsx("span",{className:"text-red-600",children:"*"})]}),W.jsxs("select",{id:"task_id",name:"task_id",value:B.task_id,onChange:se,className:"input",required:!0,children:[W.jsx("option",{value:"",children:"Select a task"}),s.map(e=>W.jsx("option",{value:e.id,children:e.name},e.id))]})]}),W.jsxs("div",{className:"mb-4",children:[W.jsxs("label",{htmlFor:"date",className:"label",children:["Date ",W.jsx("span",{className:"text-red-600",children:"*"})]}),W.jsxs("div",{className:"relative",children:[W.jsx("input",{type:"date",id:"date",name:"date",value:B.date,onChange:se,className:"input pl-10",required:!0}),W.jsx(gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]})]}),W.jsxs("div",{className:"mb-4",children:[W.jsxs("label",{className:"label",children:["Duration ",W.jsx("span",{className:"text-red-600",children:"*"})]}),W.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[W.jsxs("div",{className:"relative",children:[W.jsx("input",{type:"number",id:"duration_hours",name:"duration_hours",value:B.duration_hours,onChange:se,className:"input pl-10",min:"0",placeholder:"Hours"}),W.jsx(ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]}),W.jsx("div",{children:W.jsx("input",{type:"number",id:"duration_minutes",name:"duration_minutes",value:B.duration_minutes,onChange:se,className:"input",min:"0",max:"59",placeholder:"Minutes"})})]})]}),W.jsxs("div",{className:"mb-4",children:[W.jsx("label",{htmlFor:"description",className:"label",children:"Description"}),W.jsx("textarea",{id:"description",name:"description",value:B.description,onChange:se,className:"input",rows:3,placeholder:"What did you work on?"})]}),W.jsxs("div",{className:"mb-4 flex space-x-6",children:[W.jsxs("div",{className:"flex items-center",children:[W.jsx("input",{type:"checkbox",id:"billable",name:"billable",checked:B.billable,onChange:ne,className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),W.jsx("label",{htmlFor:"billable",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"Billable"})]}),W.jsxs("div",{className:"flex items-center",children:[W.jsx("input",{type:"checkbox",id:"active",name:"active",checked:B.active,onChange:ne,className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),W.jsx("label",{htmlFor:"active",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"Active"})]})]}),W.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[W.jsx("button",{type:"button",onClick:ee,className:"btn btn-secondary",children:"Cancel"}),W.jsx("button",{type:"submit",className:"btn btn-primary",children:T?"Update":"Create"})]})]})]})})]})}),D&&W.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:W.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[W.jsx("div",{className:"fixed inset-0 transition-opacity",onClick:re,children:W.jsx("div",{className:"absolute inset-0 bg-gray-500 dark:bg-gray-900 opacity-75"})}),W.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen",children:""}),W.jsx("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:W.jsxs("div",{className:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[W.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Delete Time Entry"}),A&&W.jsx("div",{className:"mb-4 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 p-3 rounded-md text-sm",children:A}),W.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Are you sure you want to delete this time entry? This action cannot be undone."}),W.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[W.jsx("button",{type:"button",onClick:re,className:"btn btn-secondary",children:"Cancel"}),W.jsx("button",{type:"button",onClick:async()=>{if(T)try{const{error:e}=await dt.from("time_entries").delete().eq("id",T.id);if(e)throw e;re(),Y()}catch(e){R(e.message)}},className:"btn btn-danger",children:"Delete"})]})]})})]})}),U&&W.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:W.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[W.jsx("div",{className:"fixed inset-0 transition-opacity",onClick:ae,children:W.jsx("div",{className:"absolute inset-0 bg-gray-500 dark:bg-gray-900 opacity-75"})}),W.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen",children:""}),W.jsx("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:W.jsxs("div",{className:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[W.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Filter Time Entries"}),W.jsxs("div",{className:"space-y-4",children:[W.jsxs("div",{children:[W.jsx("label",{htmlFor:"customer",className:"label",children:"Customer"}),W.jsxs("select",{id:"customer",name:"customer",value:H.customer,onChange:ie,className:"input",children:[W.jsx("option",{value:"",children:"All Customers"}),f.map(e=>W.jsx("option",{value:e.id,children:e.name},e.id))]})]}),W.jsxs("div",{children:[W.jsx("label",{htmlFor:"project",className:"label",children:"Project"}),W.jsxs("select",{id:"project",name:"project",value:H.project,onChange:ie,className:"input",children:[W.jsx("option",{value:"",children:"All Projects"}),y.map(e=>W.jsx("option",{value:e.id,children:e.name},e.id))]})]}),W.jsxs("div",{children:[W.jsx("label",{htmlFor:"task",className:"label",children:"Task"}),W.jsxs("select",{id:"task",name:"task",value:H.task,onChange:ie,className:"input",children:[W.jsx("option",{value:"",children:"All Tasks"}),s.map(e=>W.jsx("option",{value:e.id,children:e.name},e.id))]})]}),W.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[W.jsxs("div",{children:[W.jsx("label",{htmlFor:"dateFrom",className:"label",children:"From Date"}),W.jsxs("div",{className:"relative",children:[W.jsx("input",{type:"date",id:"dateFrom",name:"dateFrom",value:H.dateFrom,onChange:ie,className:"input pl-10"}),W.jsx(gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]})]}),W.jsxs("div",{children:[W.jsx("label",{htmlFor:"dateTo",className:"label",children:"To Date"}),W.jsxs("div",{className:"relative",children:[W.jsx("input",{type:"date",id:"dateTo",name:"dateTo",value:H.dateTo,onChange:ie,className:"input pl-10"}),W.jsx(gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]})]})]}),W.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[W.jsxs("div",{children:[W.jsx("label",{htmlFor:"billable",className:"label",children:"Billable"}),W.jsxs("select",{id:"billable",name:"billable",value:H.billable,onChange:ie,className:"input",children:[W.jsx("option",{value:"",children:"All"}),W.jsx("option",{value:"yes",children:"Yes"}),W.jsx("option",{value:"no",children:"No"})]})]}),W.jsxs("div",{children:[W.jsx("label",{htmlFor:"active",className:"label",children:"Active"}),W.jsxs("select",{id:"active",name:"active",value:H.active,onChange:ie,className:"input",children:[W.jsx("option",{value:"",children:"All"}),W.jsx("option",{value:"yes",children:"Yes"}),W.jsx("option",{value:"no",children:"No"})]})]})]})]}),W.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[W.jsx("button",{type:"button",onClick:le,className:"btn btn-secondary",children:"Reset"}),W.jsx("button",{type:"button",onClick:()=>{ae(),Y()},className:"btn btn-primary",children:"Apply Filters"})]})]})})]})})]})}function tr(){const{user:t}=xt(),[r,a]=e.useState([]),[s,n]=e.useState([]),[o,d]=e.useState([]),[u,h]=e.useState(!0),[p,D]=e.useState([]),[F,T]=e.useState(0),[E,B]=e.useState(0),[L,P]=e.useState(0),[$,A]=e.useState([]),[R,H]=e.useState([]),[O,U]=e.useState({dateFrom:i(l(new Date),"yyyy-MM-dd"),dateTo:i(y(new Date),"yyyy-MM-dd"),customer:"",project:"",groupBy:"customer",billableOnly:!1}),[q,I]=e.useState(!1),[z,V]=e.useState("week"),J=e.useRef(null),[Y,K]=e.useState(!1),[G,X]=e.useState(null),[Q,Z]=e.useState({timeEntriesCount:0,filteredEntriesCount:0,reportDataCount:0,renderCount:0,chartDimensions:{width:0,height:0},errors:[],rawData:null,clientDebug:{totalEntries:0,entriesWithCustomer:0,entriesWithoutCustomer:0,uniqueCustomers:[],customerBreakdown:{}}}),ee=e.useRef(0);e.useEffect(()=>{ee.current+=1,Z(e=>({...e,renderCount:ee.current}))}),e.useEffect(()=>{t&&(te(),re(),ae())},[t]),e.useEffect(()=>{r.length>0&&(me(),xe(),ue()),Z(e=>({...e,timeEntriesCount:r.length}))},[r,O,z]);const te=async()=>{try{h(!0);const{data:e,error:r}=await dt.from("time_entries").select("\n          *,\n          task:tasks(id, name),\n          customer:customers(id, name)\n        ").eq("user_id",t?.id).order("start_time",{ascending:!1});if(r)throw console.error("Supabase error:",r),Z(e=>({...e,errors:[...e.errors,`Fetch error: ${r.message}`]})),r;Z(t=>({...t,rawData:e})),a(e||[])}catch(e){console.error("Error fetching time entries:",e.message),Z(t=>({...t,errors:[...t.errors,`Fetch error: ${e.message}`]}))}finally{h(!1)}},re=async()=>{try{const{data:e,error:r}=await dt.from("customers").select("id, name").eq("user_id",t?.id).order("name");if(r)throw r;n(e||[])}catch(e){console.error("Error fetching customers:",e.message),Z(t=>({...t,errors:[...t.errors,`Customer fetch error: ${e.message}`]}))}},ae=async()=>{try{const{data:e,error:r}=await dt.from("projects").select("id, name, customer_id").eq("user_id",t?.id).order("name");if(r)throw r;const a=(e||[]).map(e=>({id:e.id,name:e.name,customer_id:e.customer_id}));d(a)}catch(e){console.error("Error fetching projects:",e.message),Z(t=>({...t,errors:[...t.errors,`Project fetch error: ${e.message}`]}))}},se=async()=>{try{const{data:e}=await dt.from("customers").select("id, name").eq("user_id",t?.id),{data:r}=await dt.from("projects").select("\n          id, \n          name, \n          customer_id,\n          customer:customers(id, name)\n        ").eq("user_id",t?.id),{data:a}=await dt.from("tasks").select("id, name").eq("user_id",t?.id),{data:s}=await dt.from("time_entries").select("\n          task_id,\n          customer:customers(id, name)\n        ").eq("user_id",t?.id),n=(e||[]).map(e=>{const t=(r||[]).filter(t=>t.customer_id===e.id).length;return{id:e.id,name:e.name,projectCount:t}}),i=(r||[]).map(e=>({id:e.id,name:e.name,customerName:e.customer?.name||"Unknown",taskCount:0})),l=(a||[]).map(e=>{const t=(s||[]).filter(t=>t.task_id===e.id),r=t.length,a=t.length>0&&t[0].customer?t[0].customer.name:"Unknown";return{id:e.id,name:e.name,entryCount:r,customerName:a}});X({totalCustomers:e?.length||0,totalProjects:r?.length||0,totalTasks:a?.length||0,customersWithProjects:n,projectsWithTasks:i,tasksWithEntries:l})}catch(e){console.error("Error fetching database state:",e),Z(t=>({...t,errors:[...t.errors,`Database state error: ${e.message}`]}))}},ne=()=>{I(!0)},ie=()=>{I(!1)},le=e=>{const{name:t,value:r,type:a}=e.target,s="checkbox"===a?e.target.checked:void 0;U(e=>({...e,[t]:"checkbox"===a?s:r}))},oe=e=>{const t=new Date;switch(e){case"today":U(e=>({...e,dateFrom:i(t,"yyyy-MM-dd"),dateTo:i(t,"yyyy-MM-dd")}));break;case"thisWeek":U(e=>({...e,dateFrom:i(l(t),"yyyy-MM-dd"),dateTo:i(y(t),"yyyy-MM-dd")}));break;case"thisMonth":U(e=>({...e,dateFrom:i(c(t),"yyyy-MM-dd"),dateTo:i(m(t),"yyyy-MM-dd")}));break;case"lastMonth":const e=new Date(t.getFullYear(),t.getMonth()-1,1);U(t=>({...t,dateFrom:i(c(e),"yyyy-MM-dd"),dateTo:i(m(e),"yyyy-MM-dd")}));break;case"allTime":U(e=>({...e,dateFrom:"",dateTo:""}))}},de=e=>{if(e.duration_minutes)return 60*e.duration_minutes;if(e.start_time&&e.end_time){const t=new Date(e.start_time),r=new Date(e.end_time);return g(r,t)}if(e.start_time){const t=new Date(e.start_time);return g(new Date,t)}return 0},ce=e=>e.filter(e=>{const t=e.date?new Date(e.date):e.start_time?new Date(e.start_time):new Date;if(O.dateFrom){const e=new Date(O.dateFrom);if(e.setHours(0,0,0,0),t<e)return!1}if(O.dateTo){const e=new Date(O.dateTo);if(e.setHours(23,59,59,999),t>e)return!1}return(!O.customer||e.customer_id===O.customer)&&(!O.project&&!(O.billableOnly&&!e.billable))}),me=()=>{const e=ce(r);Z(t=>({...t,filteredEntriesCount:e.length}));const t={};let a=0,s=0,n=0;e.forEach(e=>{const r=de(e);let l="";switch(O.groupBy){case"customer":l=e.customer?.name||"Unknown Customer";break;case"project":l="Unknown Project";break;case"task":l=e.task?.name||"Unknown Task";break;case"day":const t=e.date?new Date(e.date):e.start_time?new Date(e.start_time):new Date;l=i(t,"yyyy-MM-dd")}t[l]||(t[l]={total:0,billable:0,nonBillable:0}),t[l].total+=r,e.billable?(t[l].billable+=r,s+=r):(t[l].nonBillable+=r,n+=r),a+=r});const l=Object.entries(t).map(([e,t])=>({name:"day"===O.groupBy?i(x(e),"MMM d"):e,value:Math.round(t.total/3600*100)/100,seconds:t.total,billableHours:Math.round(t.billable/3600*100)/100,nonBillableHours:Math.round(t.nonBillable/3600*100)/100}));"day"===O.groupBy?l.sort((e,t)=>{const r=new Date(e.name),a=new Date(t.name);return r.getTime()-a.getTime()}):l.sort((e,t)=>t.seconds-e.seconds),D(l),T(Math.round(a/3600*100)/100),B(Math.round(s/3600*100)/100),P(Math.round(n/3600*100)/100),Z(e=>({...e,reportDataCount:l.length}))},xe=()=>{const e=ce(r),t=[],a={};e.forEach(e=>{const t=e.date?new Date(e.date):e.start_time?new Date(e.start_time):new Date;let r="";switch(z){case"week":const e=l(t);r=i(e,"yyyy-MM-dd");break;case"month":r=i(t,"yyyy-MM");break;case"quarter":const a=Math.floor(t.getMonth()/3)+1;r=`${t.getFullYear()}-Q${a}`}a[r]||(a[r]=[]),a[r].push(e)}),Object.entries(a).forEach(([e,r])=>{let a=0,s=0,n=0;r.forEach(e=>{const t=de(e);a+=t,e.billable?s+=t:n+=t});const l=a/3600,o=s/3600,d=n/3600;t.push({period:"week"===z?`Week of ${i(x(e),"MMM d, yyyy")}`:"month"===z?i(x(e+"-01"),"MMM yyyy"):e,totalHours:Math.round(100*l)/100,billableHours:Math.round(100*o)/100,nonBillableHours:Math.round(100*d)/100,billablePercentage:l>0?Math.round(o/l*100):0})}),t.sort((e,t)=>e.period.localeCompare(t.period)),A(t)},ue=()=>{const e={};let t=0,a=0,s=0;const n=[],i={};r.forEach(r=>{t++,console.log("Time entry structure:",{id:r.id,customer_id:r.customer_id,customer:r.customer});const l=r.customer;l&&r.customer_id?(a++,n.includes(l.name)||n.push(l.name),i[l.name]=(i[l.name]||0)+1,e[l.id]||(e[l.id]={entries:[],customer:l}),e[l.id].entries.push(r)):(s++,console.log("Entry without customer:",{entryId:r.id,customer_id:r.customer_id,hasCustomer:!!r.customer}))}),Z(e=>({...e,clientDebug:{totalEntries:t,entriesWithCustomer:a,entriesWithoutCustomer:s,uniqueCustomers:n,customerBreakdown:i}})),console.log("Client debug info:",{totalEntries:t,entriesWithCustomer:a,entriesWithoutCustomer:s,uniqueCustomers:n,customerBreakdown:i,clientGroupsKeys:Object.keys(e)});const l=Object.entries(e).map(([e,{entries:t,customer:r}])=>{let a=0,s=0,n=0;t.forEach(e=>{const t=de(e);a+=t,e.billable?s+=t:n+=t});const i=a/3600,l=s/3600,o=n/3600,d=100*l;return{clientId:e,clientName:r.name,totalHours:Math.round(100*i)/100,billableHours:Math.round(100*l)/100,nonBillableHours:Math.round(100*o)/100,billableAmount:Math.round(100*d)/100}}).filter(e=>e.totalHours>0);l.sort((e,t)=>t.totalHours-e.totalHours),console.log("Final client summaries:",l),H(l)},he=e=>`${Math.floor(e/3600)}h ${Math.floor(e%3600/60)}m`,pe=O.customer?o.filter(e=>e.customer_id===O.customer):o,ge=()=>{K(!Y),Y||G||se()},ye=async()=>{try{h(!0);let e="";const{data:r}=await dt.from("customers").select("id").eq("user_id",t?.id).limit(1);if(r&&r.length>0)e=r[0].id;else{const{data:r,error:a}=await dt.from("customers").insert({user_id:t?.id,name:"Sample Customer",email:"sample@example.com"}).select("id").single();if(a)throw a;e=r.id}const{data:a,error:s}=await dt.from("projects").insert({user_id:t?.id,customer_id:e,name:"Sample Project",description:"A sample project for testing"}).select("id").single();if(s)throw s;const{data:n,error:l}=await dt.from("tasks").insert({user_id:t?.id,name:"Sample Task",description:"A sample task for testing"}).select("id").single();if(l)throw l;const o=new Date,d=[];for(let m=0;m<7;m++){const r=new Date;r.setDate(o.getDate()-m);const a=Math.floor(3*Math.random())+1;for(let s=0;s<a;s++){const a=Math.random()>.5,l=Math.random()>.3;if(a){const a=Math.floor(210*Math.random())+30;d.push({user_id:t?.id,task_id:n.id,customer_id:e,date:i(r,"yyyy-MM-dd"),duration_minutes:a,billable:l,description:`Sample ${l?"billable":"non-billable"} work item ${s+1} for ${i(r,"MMM d")}`})}else{const a=9+Math.floor(8*Math.random()),o=3*Math.random()+.5,c=new Date(r);c.setHours(a,0,0,0);const m=new Date(c);m.setHours(c.getHours()+Math.floor(o)),m.setMinutes(o%1*60),d.push({user_id:t?.id,task_id:n.id,customer_id:e,start_time:c.toISOString(),end_time:m.toISOString(),billable:l,description:`Sample ${l?"billable":"non-billable"} time entry ${s+1} for ${i(r,"MMM d")}`})}}}const{error:c}=await dt.from("time_entries").insert(d);if(c)throw c;await te(),await re(),await ae(),alert("Sample data created successfully with direct customer relationships.")}catch(e){console.error("Error creating sample data:",e),alert(`Failed to create sample data: ${e.message}`)}finally{h(!1)}},be=F>0?Math.round(E/F*100):0;return W.jsxs("div",{children:[W.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[W.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4 sm:mb-0",children:"Reports"}),W.jsxs("div",{className:"flex flex-wrap gap-2",children:[!Y&&W.jsxs("button",{onClick:ge,className:"btn btn-secondary flex items-center justify-center",children:[W.jsx(ut,{className:"mr-2"})," Debug"]}),Y&&W.jsxs("button",{onClick:ge,className:"btn btn-secondary flex items-center justify-center",children:[W.jsx(ut,{className:"mr-2"})," Hide Debug"]}),W.jsxs("button",{onClick:ne,className:"btn btn-secondary flex items-center justify-center",children:[W.jsx(wt,{className:"mr-2"})," Filters"]}),W.jsxs("button",{onClick:()=>{if(0!==p.length)try{let e="data:text/csv;charset=utf-8,";e+=`${O.groupBy.charAt(0).toUpperCase()+O.groupBy.slice(1)},Total Hours,Billable Hours,Non-Billable Hours,Duration\n`,p.forEach(t=>{e+=`"${t.name}",${t.value},${t.billableHours},${t.nonBillableHours},${he(t.seconds)}\n`}),e+=`Total,${F},${E},${L},${he(3600*F)}\n`;const t=encodeURI(e),r=document.createElement("a");r.setAttribute("href",t),r.setAttribute("download",`time-report-by-${O.groupBy}-${i(new Date,"yyyy-MM-dd")}.csv`),document.body.appendChild(r),r.click(),document.body.removeChild(r)}catch(e){console.error("Error exporting CSV:",e),alert("Failed to export CSV. Please check console for details.")}},className:"btn btn-secondary flex items-center justify-center",disabled:0===p.length,children:[W.jsx(kt,{className:"mr-2"})," Export CSV"]}),W.jsxs("button",{onClick:()=>{if(0!==p.length)try{const e=new b,t=`Time Report by ${O.groupBy.charAt(0).toUpperCase()+O.groupBy.slice(1)}`;e.setFontSize(18),e.text(t,14,22),e.setFontSize(11);let r="Period: ";O.dateFrom?r+=`From ${i(x(O.dateFrom),"MMM d, yyyy")} `:r+="All time ",O.dateTo?r+=`to ${i(x(O.dateTo),"MMM d, yyyy")}`:r+="to Present",e.text(r,14,32),e.text(`Total Hours: ${F.toFixed(2)} | Billable: ${E.toFixed(2)} | Non-Billable: ${L.toFixed(2)}`,14,39);const a=[O.groupBy.charAt(0).toUpperCase()+O.groupBy.slice(1),"Total Hours","Billable Hours","Non-Billable Hours","Percentage"],s=p.map(e=>[e.name,e.value.toFixed(2),e.billableHours.toFixed(2),e.nonBillableHours.toFixed(2),`${(e.value/F*100).toFixed(1)}%`]);s.push(["Total",F.toFixed(2),E.toFixed(2),L.toFixed(2),"100%"]),e.autoTable({head:[a],body:s,startY:50,theme:"grid",styles:{fontSize:10,cellPadding:3},headStyles:{fillColor:[41,128,185],textColor:255},footStyles:{fillColor:[220,220,220],textColor:0,fontStyle:"bold"},alternateRowStyles:{fillColor:[245,245,245]}}),e.save(`time-report-by-${O.groupBy}-${i(new Date,"yyyy-MM-dd")}.pdf`)}catch(e){console.error("Error exporting PDF:",e),alert("Failed to export PDF. Please check console for details.")}},className:"btn btn-secondary flex items-center justify-center",disabled:0===p.length,children:[W.jsx(Nt,{className:"mr-2"})," Export PDF"]}),W.jsxs("button",{onClick:()=>{if(J.current)try{const e=window.open("","_blank");if(!e)return void alert("Pop-up blocked. Please allow pop-ups for this site to print reports.");e.document.write(`\n        <html>\n          <head>\n            <title>Time Report</title>\n            <style>\n              body { font-family: Arial, sans-serif; padding: 20px; }\n              h1 { color: #333; }\n              table { width: 100%; border-collapse: collapse; margin-top: 20px; }\n              th, td { padding: 10px; text-align: left; border-bottom: 1px solid #ddd; }\n              th { background-color: #f2f2f2; }\n              .total-row { font-weight: bold; background-color: #f2f2f2; }\n              .header { margin-bottom: 20px; }\n              .filters { margin-bottom: 15px; color: #666; }\n              @media print {\n                button { display: none; }\n              }\n            </style>\n          </head>\n          <body>\n            <div class="header">\n              <h1>Time Report by ${O.groupBy.charAt(0).toUpperCase()+O.groupBy.slice(1)}</h1>\n              <div class="filters">\n                <p>\n                  Period: \n                  ${O.dateFrom?`From ${i(x(O.dateFrom),"MMM d, yyyy")}`:"All time"}\n                  ${O.dateTo?` to ${i(x(O.dateTo),"MMM d, yyyy")}`:" to Present"}\n                </p>\n                <p>Total Hours: ${F.toFixed(2)} | Billable: ${E.toFixed(2)} | Non-Billable: ${L.toFixed(2)}</p>\n              </div>\n            </div>\n            <table>\n              <thead>\n                <tr>\n                  <th>${O.groupBy.charAt(0).toUpperCase()+O.groupBy.slice(1)}</th>\n                  <th>Total Hours</th>\n                  <th>Billable Hours</th>\n                  <th>Non-Billable Hours</th>\n                  <th>Percentage</th>\n                </tr>\n              </thead>\n              <tbody>\n                ${p.map(e=>`\n                  <tr>\n                    <td>${e.name}</td>\n                    <td>${e.value.toFixed(2)}</td>\n                    <td>${e.billableHours.toFixed(2)}</td>\n                    <td>${e.nonBillableHours.toFixed(2)}</td>\n                    <td>${(e.value/F*100).toFixed(1)}%</td>\n                  </tr>\n                `).join("")}\n                <tr class="total-row">\n                  <td>Total</td>\n                  <td>${F.toFixed(2)}</td>\n                  <td>${E.toFixed(2)}</td>\n                  <td>${L.toFixed(2)}</td>\n                  <td>100%</td>\n                </tr>\n              </tbody>\n            </table>\n            <button onclick="window.print()">Print</button>\n          </body>\n        </html>\n      `),e.document.close(),setTimeout(()=>{e.print()},500)}catch(e){console.error("Error printing report:",e),alert("Failed to print report. Please check console for details.")}},className:"btn btn-primary flex items-center justify-center",disabled:0===p.length,children:[W.jsx(Rt,{className:"mr-2"})," Print"]})]})]}),Y&&W.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:[W.jsxs("h2",{className:"text-lg font-semibold text-red-800 dark:text-red-400 mb-2 flex items-center",children:[W.jsx(ut,{className:"mr-2"})," Debug Information"]}),W.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[W.jsxs("div",{children:[W.jsx("h3",{className:"font-medium text-red-700 dark:text-red-300",children:"Data Stats:"}),W.jsxs("ul",{className:"list-disc list-inside text-sm text-red-600 dark:text-red-300",children:[W.jsxs("li",{children:["Total Time Entries: ",Q.timeEntriesCount]}),W.jsxs("li",{children:["Filtered Entries: ",Q.filteredEntriesCount]}),W.jsxs("li",{children:["Report Data Items: ",Q.reportDataCount]}),W.jsxs("li",{children:["Client Summaries: ",R.length]}),W.jsxs("li",{children:["Component Renders: ",Q.renderCount]})]})]}),W.jsxs("div",{children:[W.jsx("h3",{className:"font-medium text-red-700 dark:text-red-300",children:"Current Filters:"}),W.jsxs("ul",{className:"list-disc list-inside text-sm text-red-600 dark:text-red-300",children:[W.jsxs("li",{children:["Date Range: ",O.dateFrom||"All"," to ",O.dateTo||"Present"]}),W.jsxs("li",{children:["Customer: ",O.customer?s.find(e=>e.id===O.customer)?.name:"All"]}),W.jsxs("li",{children:["Project: ",O.project?o.find(e=>e.id===O.project)?.name:"All"]}),W.jsxs("li",{children:["Group By: ",O.groupBy]}),W.jsxs("li",{children:["Billable Only: ",O.billableOnly?"Yes":"No"]})]})]})]}),W.jsxs("div",{className:"mb-4",children:[W.jsx("h3",{className:"font-medium text-red-700 dark:text-red-300",children:"Client Debug Info:"}),W.jsxs("ul",{className:"list-disc list-inside text-sm text-red-600 dark:text-red-300",children:[W.jsxs("li",{children:["Total Entries: ",Q.clientDebug.totalEntries]}),W.jsxs("li",{children:["Entries with Customer: ",Q.clientDebug.entriesWithCustomer]}),W.jsxs("li",{children:["Entries without Customer: ",Q.clientDebug.entriesWithoutCustomer]}),W.jsxs("li",{children:["Unique Customers: ",Q.clientDebug.uniqueCustomers.join(", ")]}),W.jsxs("li",{children:["Customer Breakdown: ",JSON.stringify(Q.clientDebug.customerBreakdown)]})]})]}),G&&W.jsxs("div",{className:"mb-4",children:[W.jsx("h3",{className:"font-medium text-red-700 dark:text-red-300",children:"Database State:"}),W.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-2",children:[W.jsxs("div",{children:[W.jsxs("h4",{className:"font-medium text-red-600 dark:text-red-400",children:["Customers (",G.totalCustomers,"):"]}),W.jsx("ul",{className:"list-disc list-inside text-xs text-red-600 dark:text-red-300",children:G.customersWithProjects.map(e=>W.jsxs("li",{children:[e.name," (",e.projectCount," projects)"]},e.id))})]}),W.jsxs("div",{children:[W.jsxs("h4",{className:"font-medium text-red-600 dark:text-red-400",children:["Projects (",G.totalProjects,"):"]}),W.jsx("ul",{className:"list-disc list-inside text-xs text-red-600 dark:text-red-300",children:G.projectsWithTasks.map(e=>W.jsxs("li",{children:[e.name," - ",e.customerName," (",e.taskCount," tasks)"]},e.id))})]}),W.jsxs("div",{children:[W.jsxs("h4",{className:"font-medium text-red-600 dark:text-red-400",children:["Tasks (",G.totalTasks,"):"]}),W.jsx("ul",{className:"list-disc list-inside text-xs text-red-600 dark:text-red-300",children:G.tasksWithEntries.map(e=>W.jsxs("li",{children:[e.name," - ",e.customerName," (",e.entryCount," entries)"]},e.id))})]})]})]}),W.jsxs("div",{className:"flex flex-wrap gap-2",children:[W.jsx("button",{onClick:async()=>{try{h(!0);const{data:e,error:r}=await dt.from("customers").select("id").eq("user_id",t?.id).eq("name","Det Mindre Bureau").single();if(r||!e)throw new Error("Could not find Det Mindre Bureau customer");const{error:a}=await dt.from("time_entries").update({customer_id:e.id}).eq("user_id",t?.id).is("customer_id",null);if(a)throw a;await te(),await se(),alert("Fixed customer attribution for remaining time entries.")}catch(e){console.error("Error fixing customer attribution:",e),alert(`Failed to fix customer attribution: ${e.message}`)}finally{h(!1)}},className:"px-3 py-1 bg-green-100 hover:bg-green-200 text-green-800 text-sm rounded",children:"Fix Customer Attribution"}),W.jsx("button",{onClick:ye,className:"px-3 py-1 bg-red-100 hover:bg-red-200 text-red-800 text-sm rounded",children:"Create Sample Data"}),W.jsx("button",{onClick:te,className:"px-3 py-1 bg-red-100 hover:bg-red-200 text-red-800 text-sm rounded",children:"Reload Data"}),W.jsx("button",{onClick:()=>oe("allTime"),className:"px-3 py-1 bg-red-100 hover:bg-red-200 text-red-800 text-sm rounded",children:"Show All Time"}),W.jsx("button",{onClick:se,className:"px-3 py-1 bg-red-100 hover:bg-red-200 text-red-800 text-sm rounded",children:"Check Database State"})]})]}),W.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[W.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg p-4",children:W.jsxs("div",{className:"flex items-center",children:[W.jsx(ft,{className:"h-8 w-8 text-blue-500"}),W.jsxs("div",{className:"ml-4",children:[W.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Hours"}),W.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:F.toFixed(1)})]})]})}),W.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg p-4",children:W.jsxs("div",{className:"flex items-center",children:[W.jsx(jt,{className:"h-8 w-8 text-green-500"}),W.jsxs("div",{className:"ml-4",children:[W.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Billable Hours"}),W.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:E.toFixed(1)})]})]})}),W.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg p-4",children:W.jsxs("div",{className:"flex items-center",children:[W.jsx(ft,{className:"h-8 w-8 text-orange-500"}),W.jsxs("div",{className:"ml-4",children:[W.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Non-Billable Hours"}),W.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:L.toFixed(1)})]})]})}),W.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg p-4",children:W.jsxs("div",{className:"flex items-center",children:[W.jsx(ht,{className:"h-8 w-8 text-purple-500"}),W.jsxs("div",{className:"ml-4",children:[W.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Billable %"}),W.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[be,"%"]})]})]})})]}),W.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg p-4 mb-6",children:[W.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Quick Date Range"}),W.jsxs("div",{className:"flex flex-wrap gap-2",children:[W.jsx("button",{onClick:()=>oe("today"),className:"px-3 py-1 rounded-md text-sm "+(O.dateFrom===i(new Date,"yyyy-MM-dd")&&O.dateTo===i(new Date,"yyyy-MM-dd")?"bg-primary-100 text-primary-800 dark:bg-primary-900/20 dark:text-primary-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"Today"}),W.jsx("button",{onClick:()=>oe("thisWeek"),className:"px-3 py-1 rounded-md text-sm "+(O.dateFrom===i(l(new Date),"yyyy-MM-dd")&&O.dateTo===i(y(new Date),"yyyy-MM-dd")?"bg-primary-100 text-primary-800 dark:bg-primary-900/20 dark:text-primary-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"This Week"}),W.jsx("button",{onClick:()=>oe("thisMonth"),className:"px-3 py-1 rounded-md text-sm "+(O.dateFrom===i(c(new Date),"yyyy-MM-dd")&&O.dateTo===i(m(new Date),"yyyy-MM-dd")?"bg-primary-100 text-primary-800 dark:bg-primary-900/20 dark:text-primary-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"This Month"}),W.jsx("button",{onClick:()=>oe("lastMonth"),className:"px-3 py-1 rounded-md text-sm bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600",children:"Last Month"}),W.jsx("button",{onClick:()=>oe("allTime"),className:"px-3 py-1 rounded-md text-sm "+(O.dateFrom||O.dateTo?"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600":"bg-primary-100 text-primary-800 dark:bg-primary-900/20 dark:text-primary-400"),children:"All Time"})]}),W.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row sm:items-center text-sm text-gray-600 dark:text-gray-400",children:[W.jsxs("div",{className:"flex items-center mb-2 sm:mb-0 sm:mr-4",children:[W.jsx(gt,{className:"mr-1"}),W.jsx("span",{children:O.dateFrom?`From: ${i(x(O.dateFrom),"MMM d, yyyy")}`:"From: All time"})]}),W.jsxs("div",{className:"flex items-center mb-2 sm:mb-0 sm:mr-4",children:[W.jsx(gt,{className:"mr-1"}),W.jsx("span",{children:O.dateTo?`To: ${i(x(O.dateTo),"MMM d, yyyy")}`:"To: Present"})]}),W.jsxs("div",{className:"flex items-center",children:[W.jsx(ft,{className:"mr-1"}),W.jsxs("span",{children:["Total: ",F," hours (",be,"% billable)"]})]})]})]}),W.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg p-4 mb-6",children:[W.jsxs("div",{className:"flex items-center justify-between mb-4",children:[W.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Hours by Period"}),W.jsxs("div",{className:"flex gap-2",children:[W.jsx("button",{onClick:()=>V("week"),className:"px-3 py-1 rounded-md text-sm "+("week"===z?"bg-primary-100 text-primary-800 dark:bg-primary-900/20 dark:text-primary-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"Weekly"}),W.jsx("button",{onClick:()=>V("month"),className:"px-3 py-1 rounded-md text-sm "+("month"===z?"bg-primary-100 text-primary-800 dark:bg-primary-900/20 dark:text-primary-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"Monthly"}),W.jsx("button",{onClick:()=>V("quarter"),className:"px-3 py-1 rounded-md text-sm "+("quarter"===z?"bg-primary-100 text-primary-800 dark:bg-primary-900/20 dark:text-primary-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"Quarterly"})]})]}),$.length>0?W.jsx("div",{className:"overflow-x-auto",children:W.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[W.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:W.jsxs("tr",{children:[W.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Period"}),W.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Total Hours"}),W.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Billable Hours"}),W.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Non-Billable Hours"}),W.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Billable %"})]})}),W.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:$.map((e,t)=>W.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[W.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.period}),W.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 text-right",children:e.totalHours.toFixed(2)}),W.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600 dark:text-green-400 text-right",children:e.billableHours.toFixed(2)}),W.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-orange-600 dark:text-orange-400 text-right",children:e.nonBillableHours.toFixed(2)}),W.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 text-right",children:[e.billablePercentage,"%"]})]},t))})]})}):W.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"No data available for the selected period."})]}),W.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg p-4 mb-6",children:[W.jsxs("div",{className:"flex items-center mb-4",children:[W.jsx(zt,{className:"mr-2 text-primary-600"}),W.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Client Overview"}),W.jsx("span",{className:"ml-2 text-sm text-gray-500 dark:text-gray-400",children:"(All Time Data)"})]}),R.length>0?W.jsx("div",{className:"overflow-x-auto",children:W.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[W.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:W.jsxs("tr",{children:[W.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Client"}),W.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Total Hours"}),W.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Billable Hours"}),W.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Non-Billable Hours"}),W.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Billable Amount"}),W.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),W.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:R.map(e=>W.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[W.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.clientName}),W.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 text-right",children:e.totalHours.toFixed(2)}),W.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600 dark:text-green-400 text-right",children:e.billableHours.toFixed(2)}),W.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-orange-600 dark:text-orange-400 text-right",children:e.nonBillableHours.toFixed(2)}),W.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white text-right font-medium",children:["$",e.billableAmount.toFixed(2)]}),W.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:W.jsx("button",{onClick:()=>{U(t=>({...t,customer:e.clientId}))},className:"text-primary-600 hover:text-primary-900 dark:text-primary-400 dark:hover:text-primary-300 text-sm font-medium",children:"Filter for Invoice"})})]},e.clientId))})]})}):W.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"No client data available."})]}),W.jsx("div",{ref:J,children:u?W.jsx("div",{className:"flex justify-center py-8",children:W.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}):p.length>0?W.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[W.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg p-4",children:[W.jsxs("div",{className:"flex items-center mb-4",children:[W.jsx(ht,{className:"mr-2 text-primary-600"}),W.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Time by ",O.groupBy.charAt(0).toUpperCase()+O.groupBy.slice(1)]})]}),W.jsx("div",{className:"h-80",children:W.jsx(f,{width:"100%",height:"100%",children:W.jsxs(j,{data:p,margin:{top:20,right:30,left:20,bottom:60},children:[W.jsx(k,{strokeDasharray:"3 3"}),W.jsx(v,{dataKey:"name",angle:-45,textAnchor:"end",height:70,tick:{fontSize:12}}),W.jsx(N,{label:{value:"Hours",angle:-90,position:"insideLeft",style:{textAnchor:"middle"}}}),W.jsx(w,{formatter:(e,t)=>"Billable Hours"===t?[`${e} hours`,"Billable"]:"Non-Billable Hours"===t?[`${e} hours`,"Non-Billable"]:[`${e} hours`,"Total"],labelFormatter:e=>`${O.groupBy.charAt(0).toUpperCase()+O.groupBy.slice(1)}: ${e}`}),W.jsx(C,{}),W.jsx(_,{dataKey:"billableHours",name:"Billable Hours",fill:"#10b981"}),W.jsx(_,{dataKey:"nonBillableHours",name:"Non-Billable Hours",fill:"#f59e0b"})]})})})]}),W.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg p-4",children:[W.jsxs("div",{className:"flex items-center mb-4",children:[W.jsx($t,{className:"mr-2 text-primary-600"}),W.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Billable vs Non-Billable Distribution"})]}),W.jsx("div",{className:"h-80",children:W.jsx(f,{width:"100%",height:"100%",children:W.jsxs(M,{children:[W.jsx(S,{data:[{name:"Billable Hours",value:E,fill:"#10b981"},{name:"Non-Billable Hours",value:L,fill:"#f59e0b"}],cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,dataKey:"value",label:({name:e,percent:t})=>`${e}: ${(100*t).toFixed(0)}%`}),W.jsx(w,{formatter:e=>[`${e.toFixed(2)} hours`,"Time"]}),W.jsx(C,{})]})})})]}),W.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg p-4 lg:col-span-2",children:[W.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Time Summary"}),W.jsx("div",{className:"overflow-x-auto",children:W.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[W.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:W.jsxs("tr",{children:[W.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:O.groupBy.charAt(0).toUpperCase()+O.groupBy.slice(1)}),W.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Total Hours"}),W.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Billable Hours"}),W.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Non-Billable Hours"}),W.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Percentage"})]})}),W.jsxs("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:[p.map((e,t)=>W.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[W.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.name}),W.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 text-right",children:e.value.toFixed(2)}),W.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600 dark:text-green-400 text-right",children:e.billableHours.toFixed(2)}),W.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-orange-600 dark:text-orange-400 text-right",children:e.nonBillableHours.toFixed(2)}),W.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 text-right",children:[(e.value/F*100).toFixed(1),"%"]})]},t)),W.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-700",children:[W.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900 dark:text-white",children:"Total"}),W.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900 dark:text-white text-right",children:F.toFixed(2)}),W.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-green-600 dark:text-green-400 text-right",children:E.toFixed(2)}),W.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-orange-600 dark:text-orange-400 text-right",children:L.toFixed(2)}),W.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900 dark:text-white text-right",children:"100%"})]})]})]})})]})]}):W.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg p-6 text-center",children:[W.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"No time entries found for the selected filters."}),Y&&W.jsxs("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded text-left",children:[W.jsx("p",{className:"text-red-700 dark:text-red-300 text-sm mb-2",children:"Debugging Information:"}),W.jsxs("ul",{className:"list-disc list-inside text-sm text-red-600 dark:text-red-300",children:[W.jsxs("li",{children:["Total Time Entries: ",Q.timeEntriesCount]}),W.jsxs("li",{children:["Filtered Entries: ",Q.filteredEntriesCount]}),W.jsxs("li",{children:["Current Filters: ",JSON.stringify(O)]})]}),W.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[W.jsx("button",{onClick:ye,className:"px-3 py-1 bg-red-100 hover:bg-red-200 text-red-800 text-sm rounded",children:"Create Sample Data"}),W.jsx("button",{onClick:()=>oe("allTime"),className:"px-3 py-1 bg-red-100 hover:bg-red-200 text-red-800 text-sm rounded",children:"Show All Time"})]})]}),W.jsx("button",{onClick:ne,className:"btn btn-secondary",children:"Adjust Filters"})]})}),q&&W.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:W.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[W.jsx("div",{className:"fixed inset-0 transition-opacity",onClick:ie,children:W.jsx("div",{className:"absolute inset-0 bg-gray-500 dark:bg-gray-900 opacity-75"})}),W.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen",children:""}),W.jsx("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:W.jsxs("div",{className:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[W.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Report Filters"}),W.jsxs("div",{className:"space-y-4",children:[W.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[W.jsxs("div",{children:[W.jsx("label",{htmlFor:"dateFrom",className:"label",children:"From Date"}),W.jsxs("div",{className:"relative",children:[W.jsx("input",{type:"date",id:"dateFrom",name:"dateFrom",value:O.dateFrom,onChange:le,className:"input pl-10"}),W.jsx(gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]})]}),W.jsxs("div",{children:[W.jsx("label",{htmlFor:"dateTo",className:"label",children:"To Date"}),W.jsxs("div",{className:"relative",children:[W.jsx("input",{type:"date",id:"dateTo",name:"dateTo",value:O.dateTo,onChange:le,className:"input pl-10"}),W.jsx(gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]})]})]}),W.jsxs("div",{children:[W.jsx("label",{htmlFor:"customer",className:"label",children:"Customer"}),W.jsxs("select",{id:"customer",name:"customer",value:O.customer,onChange:le,className:"input",children:[W.jsx("option",{value:"",children:"All Customers"}),s.map(e=>W.jsx("option",{value:e.id,children:e.name},e.id))]})]}),W.jsxs("div",{children:[W.jsx("label",{htmlFor:"project",className:"label",children:"Project"}),W.jsxs("select",{id:"project",name:"project",value:O.project,onChange:le,className:"input",disabled:!O.customer,children:[W.jsx("option",{value:"",children:"All Projects"}),pe.map(e=>W.jsx("option",{value:e.id,children:e.name},e.id))]})]}),W.jsxs("div",{children:[W.jsx("label",{htmlFor:"groupBy",className:"label",children:"Group By"}),W.jsxs("select",{id:"groupBy",name:"groupBy",value:O.groupBy,onChange:le,className:"input",children:[W.jsx("option",{value:"customer",children:"Customer"}),W.jsx("option",{value:"project",children:"Project"}),W.jsx("option",{value:"task",children:"Task"}),W.jsx("option",{value:"day",children:"Day"})]})]}),W.jsxs("div",{className:"flex items-center",children:[W.jsx("input",{type:"checkbox",id:"billableOnly",name:"billableOnly",checked:O.billableOnly,onChange:le,className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),W.jsx("label",{htmlFor:"billableOnly",className:"ml-2 block text-sm text-gray-900 dark:text-white",children:"Show billable hours only"})]})]}),W.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[W.jsx("button",{type:"button",onClick:ie,className:"btn btn-secondary",children:"Cancel"}),W.jsx("button",{type:"button",onClick:()=>{ie(),me(),xe(),ue()},className:"btn btn-primary",children:"Apply Filters"})]})]})})]})})]})}function rr(){return W.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen px-4 text-center",children:[W.jsx("h1",{className:"text-6xl font-bold text-primary-600",children:"404"}),W.jsx("h2",{className:"mt-4 text-2xl font-semibold text-gray-900 dark:text-white",children:"Page Not Found"}),W.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"The page you are looking for doesn't exist or has been moved."}),W.jsx(st,{to:"/",className:"mt-6 btn btn-primary",children:"Go to Dashboard"})]})}function ar(){const{user:e,loading:t}=xt();return t?W.jsx("div",{className:"flex items-center justify-center min-h-screen",children:W.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}):W.jsxs(Ge,{children:[W.jsx(Ye,{path:"/login",element:e?W.jsx(Ve,{to:"/"}):W.jsx(Kt,{})}),W.jsx(Ye,{path:"/register",element:e?W.jsx(Ve,{to:"/"}):W.jsx(Gt,{})}),W.jsxs(Ye,{path:"/",element:e?W.jsx(Jt,{}):W.jsx(Ve,{to:"/login"}),children:[W.jsx(Ye,{index:!0,element:W.jsx(Yt,{})}),W.jsx(Ye,{path:"customers",element:W.jsx(Xt,{})}),W.jsx(Ye,{path:"projects",element:W.jsx(Qt,{})}),W.jsx(Ye,{path:"tasks",element:W.jsx(Zt,{})}),W.jsx(Ye,{path:"time-entries",element:W.jsx(er,{})}),W.jsx(Ye,{path:"reports",element:W.jsx(tr,{})})]}),W.jsx(Ye,{path:"*",element:W.jsx(rr,{})})]})}O.createRoot(document.getElementById("root")).render(W.jsx(a.StrictMode,{children:W.jsx(tt,{children:W.jsx(mt,{children:W.jsx(ar,{})})})}));
